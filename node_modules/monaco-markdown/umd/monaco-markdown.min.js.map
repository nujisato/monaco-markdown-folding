{"version":3,"file":"monaco-markdown.min.js","sources":["monaco-markdown.js"],"sourcesContent":["/**!\nÂ© 2019 JetBrains\n@version 0.0.12\n@license MIT\n*/\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"monaco-editor\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"MonacoMarkdown\", [\"vs/editor/editor.main\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MonacoMarkdown\"] = factory(require(\"monaco-editor\"));\n\telse\n\t\troot[\"MonacoMarkdown\"] = factory(root[\"monaco\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 8);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE__0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SnippetString = exports.TextEditorSelectionChangeKind = exports.TextEditorRevealType = exports.WorkspaceEdit = exports.TextEdit = exports.EndOfLine = exports.Selection = exports.Range = exports.Position = exports.values = void 0;\nvar errors_1 = __webpack_require__(9);\n// export function values<V = any>(set: Set<V>): V[];\n// export function values<K = any, V = any>(map: Map<K, V>): V[];\nfunction values(forEachable) {\n    var result = [];\n    forEachable.forEach(function (value) { return result.push(value); });\n    return result;\n}\nexports.values = values;\nvar Position = /** @class */ (function () {\n    function Position(line, character) {\n        if (line < 0) {\n            throw errors_1.illegalArgument('line must be non-negative');\n        }\n        if (character < 0) {\n            throw errors_1.illegalArgument('character must be non-negative');\n        }\n        this._line = line;\n        this._character = character;\n    }\n    Position.Min = function () {\n        var positions = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            positions[_i] = arguments[_i];\n        }\n        if (positions.length === 0) {\n            throw new TypeError();\n        }\n        var result = positions[0];\n        for (var i = 1; i < positions.length; i++) {\n            var p = positions[i];\n            if (p.isBefore(result)) {\n                result = p;\n            }\n        }\n        return result;\n    };\n    Position.Max = function () {\n        var positions = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            positions[_i] = arguments[_i];\n        }\n        if (positions.length === 0) {\n            throw new TypeError();\n        }\n        var result = positions[0];\n        for (var i = 1; i < positions.length; i++) {\n            var p = positions[i];\n            if (p.isAfter(result)) {\n                result = p;\n            }\n        }\n        return result;\n    };\n    Position.isPosition = function (other) {\n        if (!other) {\n            return false;\n        }\n        if (other instanceof Position) {\n            return true;\n        }\n        var _a = other, line = _a.line, character = _a.character;\n        if (typeof line === 'number' && typeof character === 'number') {\n            return true;\n        }\n        return false;\n    };\n    Object.defineProperty(Position.prototype, \"line\", {\n        get: function () {\n            return this._line;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Position.prototype, \"character\", {\n        get: function () {\n            return this._character;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Position.prototype.isBefore = function (other) {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character < other._character;\n    };\n    Position.prototype.isBeforeOrEqual = function (other) {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character <= other._character;\n    };\n    Position.prototype.isAfter = function (other) {\n        return !this.isBeforeOrEqual(other);\n    };\n    Position.prototype.isAfterOrEqual = function (other) {\n        return !this.isBefore(other);\n    };\n    Position.prototype.isEqual = function (other) {\n        return this._line === other._line && this._character === other._character;\n    };\n    Position.prototype.compareTo = function (other) {\n        if (this._line < other._line) {\n            return -1;\n        }\n        else if (this._line > other.line) {\n            return 1;\n        }\n        else {\n            // equal line\n            if (this._character < other._character) {\n                return -1;\n            }\n            else if (this._character > other._character) {\n                return 1;\n            }\n            else {\n                // equal line and character\n                return 0;\n            }\n        }\n    };\n    Position.prototype.translate = function (lineDeltaOrChange, characterDelta) {\n        if (characterDelta === void 0) { characterDelta = 0; }\n        if (lineDeltaOrChange === null || characterDelta === null) {\n            throw errors_1.illegalArgument();\n        }\n        var lineDelta;\n        if (typeof lineDeltaOrChange === 'undefined') {\n            lineDelta = 0;\n        }\n        else if (typeof lineDeltaOrChange === 'number') {\n            lineDelta = lineDeltaOrChange;\n        }\n        else {\n            lineDelta = typeof lineDeltaOrChange.lineDelta === 'number' ? lineDeltaOrChange.lineDelta : 0;\n            characterDelta = typeof lineDeltaOrChange.characterDelta === 'number' ? lineDeltaOrChange.characterDelta : 0;\n        }\n        if (lineDelta === 0 && characterDelta === 0) {\n            return this;\n        }\n        return new Position(this.line + lineDelta, this.character + characterDelta);\n    };\n    Position.prototype.with = function (lineOrChange, character) {\n        if (character === void 0) { character = this.character; }\n        if (lineOrChange === null || character === null) {\n            throw errors_1.illegalArgument();\n        }\n        var line;\n        if (typeof lineOrChange === 'undefined') {\n            line = this.line;\n        }\n        else if (typeof lineOrChange === 'number') {\n            line = lineOrChange;\n        }\n        else {\n            line = typeof lineOrChange.line === 'number' ? lineOrChange.line : this.line;\n            character = typeof lineOrChange.character === 'number' ? lineOrChange.character : this.character;\n        }\n        if (line === this.line && character === this.character) {\n            return this;\n        }\n        return new Position(line, character);\n    };\n    Position.prototype.toJSON = function () {\n        return { line: this.line, character: this.character };\n    };\n    return Position;\n}());\nexports.Position = Position;\nvar Range = /** @class */ (function () {\n    function Range(startLineOrStart, startColumnOrEnd, endLine, endColumn) {\n        var start;\n        var end;\n        if (typeof startLineOrStart === 'number' && typeof startColumnOrEnd === 'number' && typeof endLine === 'number' && typeof endColumn === 'number') {\n            start = new Position(startLineOrStart, startColumnOrEnd);\n            end = new Position(endLine, endColumn);\n        }\n        else if (startLineOrStart instanceof Position && startColumnOrEnd instanceof Position) {\n            start = startLineOrStart;\n            end = startColumnOrEnd;\n        }\n        if (!start || !end) {\n            throw new Error('Invalid arguments');\n        }\n        if (start.isBefore(end)) {\n            this._start = start;\n            this._end = end;\n        }\n        else {\n            this._start = end;\n            this._end = start;\n        }\n    }\n    Range.isRange = function (thing) {\n        if (thing instanceof Range) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Position.isPosition(thing.start)\n            && Position.isPosition(thing.end);\n    };\n    Object.defineProperty(Range.prototype, \"start\", {\n        get: function () {\n            return this._start;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Range.prototype, \"end\", {\n        get: function () {\n            return this._end;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Range.prototype.contains = function (positionOrRange) {\n        if (positionOrRange instanceof Range) {\n            return this.contains(positionOrRange._start)\n                && this.contains(positionOrRange._end);\n        }\n        else if (positionOrRange instanceof Position) {\n            if (positionOrRange.isBefore(this._start)) {\n                return false;\n            }\n            if (this._end.isBefore(positionOrRange)) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    };\n    Range.prototype.isEqual = function (other) {\n        return this._start.isEqual(other._start) && this._end.isEqual(other._end);\n    };\n    Range.prototype.intersection = function (other) {\n        var start = Position.Max(other.start, this._start);\n        var end = Position.Min(other.end, this._end);\n        if (start.isAfter(end)) {\n            // this happens when there is no overlap:\n            // |-----|\n            //          |----|\n            return undefined;\n        }\n        return new Range(start, end);\n    };\n    Range.prototype.union = function (other) {\n        if (this.contains(other)) {\n            return this;\n        }\n        else if (other.contains(this)) {\n            return other;\n        }\n        var start = Position.Min(other.start, this._start);\n        var end = Position.Max(other.end, this.end);\n        return new Range(start, end);\n    };\n    Object.defineProperty(Range.prototype, \"isEmpty\", {\n        get: function () {\n            return this._start.isEqual(this._end);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Range.prototype, \"isSingleLine\", {\n        get: function () {\n            return this._start.line === this._end.line;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Range.prototype.with = function (startOrChange, end) {\n        if (end === void 0) { end = this.end; }\n        if (startOrChange === null || end === null) {\n            throw errors_1.illegalArgument();\n        }\n        var start;\n        if (!startOrChange) {\n            start = this.start;\n        }\n        else if (Position.isPosition(startOrChange)) {\n            start = startOrChange;\n        }\n        else {\n            start = startOrChange.start || this.start;\n            end = startOrChange.end || this.end;\n        }\n        if (start.isEqual(this._start) && end.isEqual(this.end)) {\n            return this;\n        }\n        return new Range(start, end);\n    };\n    Range.prototype.toJSON = function () {\n        return [this.start, this.end];\n    };\n    return Range;\n}());\nexports.Range = Range;\nvar Selection = /** @class */ (function (_super) {\n    __extends(Selection, _super);\n    function Selection(anchorLineOrAnchor, anchorColumnOrActive, activeLine, activeColumn) {\n        var _this = this;\n        var anchor;\n        var active;\n        if (typeof anchorLineOrAnchor === 'number' && typeof anchorColumnOrActive === 'number' && typeof activeLine === 'number' && typeof activeColumn === 'number') {\n            anchor = new Position(anchorLineOrAnchor, anchorColumnOrActive);\n            active = new Position(activeLine, activeColumn);\n        }\n        else if (anchorLineOrAnchor instanceof Position && anchorColumnOrActive instanceof Position) {\n            anchor = anchorLineOrAnchor;\n            active = anchorColumnOrActive;\n        }\n        if (!anchor || !active) {\n            throw new Error('Invalid arguments');\n        }\n        _this = _super.call(this, anchor, active) || this;\n        _this._anchor = anchor;\n        _this._active = active;\n        return _this;\n    }\n    Selection.isSelection = function (thing) {\n        if (thing instanceof Selection) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange(thing)\n            && Position.isPosition(thing.anchor)\n            && Position.isPosition(thing.active)\n            && typeof thing.isReversed === 'boolean';\n    };\n    Object.defineProperty(Selection.prototype, \"anchor\", {\n        get: function () {\n            return this._anchor;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Selection.prototype, \"active\", {\n        get: function () {\n            return this._active;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Selection.prototype, \"isReversed\", {\n        get: function () {\n            return this._anchor === this._end;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Selection.prototype.toJSON = function () {\n        return {\n            start: this.start,\n            end: this.end,\n            active: this.active,\n            anchor: this.anchor\n        };\n    };\n    return Selection;\n}(Range));\nexports.Selection = Selection;\nvar EndOfLine;\n(function (EndOfLine) {\n    EndOfLine[EndOfLine[\"LF\"] = 1] = \"LF\";\n    EndOfLine[EndOfLine[\"CRLF\"] = 2] = \"CRLF\";\n})(EndOfLine = exports.EndOfLine || (exports.EndOfLine = {}));\nvar TextEdit = /** @class */ (function () {\n    function TextEdit(range, newText) {\n        this.range = range;\n        this._newText = newText;\n    }\n    TextEdit.isTextEdit = function (thing) {\n        if (thing instanceof TextEdit) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange(thing)\n            && typeof thing.newText === 'string';\n    };\n    TextEdit.replace = function (range, newText) {\n        return new TextEdit(range, newText);\n    };\n    TextEdit.insert = function (position, newText) {\n        return TextEdit.replace(new Range(position, position), newText);\n    };\n    TextEdit.delete = function (range) {\n        return TextEdit.replace(range, '');\n    };\n    TextEdit.setEndOfLine = function (eol) {\n        var ret = new TextEdit(new Range(new Position(0, 0), new Position(0, 0)), '');\n        ret.newEol = eol;\n        return ret;\n    };\n    Object.defineProperty(TextEdit.prototype, \"range\", {\n        get: function () {\n            return this._range;\n        },\n        set: function (value) {\n            if (value && !Range.isRange(value)) {\n                throw errors_1.illegalArgument('range');\n            }\n            this._range = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextEdit.prototype, \"newText\", {\n        get: function () {\n            return this._newText || '';\n        },\n        set: function (value) {\n            if (value && typeof value !== 'string') {\n                throw errors_1.illegalArgument('newText');\n            }\n            this._newText = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextEdit.prototype, \"newEol\", {\n        get: function () {\n            return this._newEol;\n        },\n        set: function (value) {\n            if (value && typeof value !== 'number') {\n                throw errors_1.illegalArgument('newEol');\n            }\n            this._newEol = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TextEdit.prototype.toJSON = function () {\n        return {\n            range: this.range,\n            newText: this.newText,\n            newEol: this._newEol\n        };\n    };\n    return TextEdit;\n}());\nexports.TextEdit = TextEdit;\nvar WorkspaceEdit = /** @class */ (function () {\n    function WorkspaceEdit() {\n        this._edits = new Array();\n    }\n    WorkspaceEdit.prototype.renameFile = function (from, to, options) {\n        this._edits.push({ _type: 1, from: from, to: to, options: options });\n    };\n    WorkspaceEdit.prototype.createFile = function (uri, options) {\n        this._edits.push({ _type: 1, from: undefined, to: uri, options: options });\n    };\n    WorkspaceEdit.prototype.deleteFile = function (uri, options) {\n        this._edits.push({ _type: 1, from: uri, to: undefined, options: options });\n    };\n    WorkspaceEdit.prototype.replace = function (uri, range, newText) {\n        this._edits.push({ _type: 2, uri: uri, edit: new TextEdit(range, newText) });\n    };\n    WorkspaceEdit.prototype.insert = function (resource, position, newText) {\n        this.replace(resource, new Range(position, position), newText);\n    };\n    WorkspaceEdit.prototype.delete = function (resource, range) {\n        this.replace(resource, range, '');\n    };\n    WorkspaceEdit.prototype.has = function (uri) {\n        for (var _i = 0, _a = this._edits; _i < _a.length; _i++) {\n            var edit = _a[_i];\n            if (edit._type === 2 && edit.uri.toString() === uri.toString()) {\n                return true;\n            }\n        }\n        return false;\n    };\n    WorkspaceEdit.prototype.set = function (uri, edits) {\n        if (!edits) {\n            // remove all text edits for `uri`\n            for (var i = 0; i < this._edits.length; i++) {\n                var element = this._edits[i];\n                if (element._type === 2 && element.uri.toString() === uri.toString()) {\n                    this._edits[i] = undefined; // will be coalesced down below\n                }\n            }\n            // this._edits = coalesce(this._edits); TODO\n        }\n        else {\n            // append edit to the end\n            for (var _i = 0, edits_1 = edits; _i < edits_1.length; _i++) {\n                var edit = edits_1[_i];\n                if (edit) {\n                    this._edits.push({ _type: 2, uri: uri, edit: edit });\n                }\n            }\n        }\n    };\n    WorkspaceEdit.prototype.get = function (uri) {\n        var res = [];\n        for (var _i = 0, _a = this._edits; _i < _a.length; _i++) {\n            var candidate = _a[_i];\n            if (candidate._type === 2 && candidate.uri.toString() === uri.toString()) {\n                res.push(candidate.edit);\n            }\n        }\n        return res;\n    };\n    WorkspaceEdit.prototype.entries = function () {\n        var textEdits = new Map();\n        for (var _i = 0, _a = this._edits; _i < _a.length; _i++) {\n            var candidate = _a[_i];\n            if (candidate._type === 2) {\n                var textEdit = textEdits.get(candidate.uri.toString());\n                if (!textEdit) {\n                    textEdit = [candidate.uri, []];\n                    textEdits.set(candidate.uri.toString(), textEdit);\n                }\n                textEdit[1].push(candidate.edit);\n            }\n        }\n        return values(textEdits);\n    };\n    WorkspaceEdit.prototype._allEntries = function () {\n        var res = [];\n        for (var _i = 0, _a = this._edits; _i < _a.length; _i++) {\n            var edit = _a[_i];\n            if (edit._type === 1) {\n                res.push([edit.from, edit.to, edit.options]);\n            }\n            else {\n                res.push([edit.uri, [edit.edit]]);\n            }\n        }\n        return res;\n    };\n    Object.defineProperty(WorkspaceEdit.prototype, \"size\", {\n        get: function () {\n            return this.entries().length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    WorkspaceEdit.prototype.toJSON = function () {\n        return this.entries();\n    };\n    return WorkspaceEdit;\n}());\nexports.WorkspaceEdit = WorkspaceEdit;\nvar TextEditorRevealType;\n(function (TextEditorRevealType) {\n    TextEditorRevealType[TextEditorRevealType[\"Default\"] = 0] = \"Default\";\n    TextEditorRevealType[TextEditorRevealType[\"InCenter\"] = 1] = \"InCenter\";\n    TextEditorRevealType[TextEditorRevealType[\"InCenterIfOutsideViewport\"] = 2] = \"InCenterIfOutsideViewport\";\n    TextEditorRevealType[TextEditorRevealType[\"AtTop\"] = 3] = \"AtTop\";\n})(TextEditorRevealType = exports.TextEditorRevealType || (exports.TextEditorRevealType = {}));\nvar TextEditorSelectionChangeKind;\n(function (TextEditorSelectionChangeKind) {\n    TextEditorSelectionChangeKind[TextEditorSelectionChangeKind[\"Keyboard\"] = 1] = \"Keyboard\";\n    TextEditorSelectionChangeKind[TextEditorSelectionChangeKind[\"Mouse\"] = 2] = \"Mouse\";\n    TextEditorSelectionChangeKind[TextEditorSelectionChangeKind[\"Command\"] = 3] = \"Command\";\n})(TextEditorSelectionChangeKind = exports.TextEditorSelectionChangeKind || (exports.TextEditorSelectionChangeKind = {}));\nvar SnippetString = /** @class */ (function () {\n    function SnippetString(value) {\n        this._tabstop = 1;\n        this.value = value || '';\n    }\n    SnippetString.isSnippetString = function (thing) {\n        if (thing instanceof SnippetString) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.value === 'string';\n    };\n    SnippetString._escape = function (value) {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    };\n    SnippetString.prototype.appendText = function (string) {\n        this.value += SnippetString._escape(string);\n        return this;\n    };\n    SnippetString.prototype.appendTabstop = function (number) {\n        if (number === void 0) { number = this._tabstop++; }\n        this.value += '$';\n        this.value += number;\n        return this;\n    };\n    SnippetString.prototype.appendPlaceholder = function (value, number) {\n        if (number === void 0) { number = this._tabstop++; }\n        if (typeof value === 'function') {\n            var nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            value(nested);\n            this._tabstop = nested._tabstop;\n            value = nested.value;\n        }\n        else {\n            value = SnippetString._escape(value);\n        }\n        this.value += '${';\n        this.value += number;\n        this.value += ':';\n        this.value += value;\n        this.value += '}';\n        return this;\n    };\n    SnippetString.prototype.appendVariable = function (name, defaultValue) {\n        if (typeof defaultValue === 'function') {\n            var nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            defaultValue(nested);\n            this._tabstop = nested._tabstop;\n            defaultValue = nested.value;\n        }\n        else if (typeof defaultValue === 'string') {\n            defaultValue = defaultValue.replace(/\\$|}/g, '\\\\$&');\n        }\n        this.value += '${';\n        this.value += name;\n        if (defaultValue) {\n            this.value += ':';\n            this.value += defaultValue;\n        }\n        this.value += '}';\n        return this;\n    };\n    return SnippetString;\n}());\nexports.SnippetString = SnippetString;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextEditorEdit = exports.TextEditor = exports.TextDocument = exports.getWordDefinitionFor = exports.setWordDefinitionFor = void 0;\nvar extHostTypes_1 = __webpack_require__(1);\nvar monaco_editor_1 = __webpack_require__(0);\nvar vscode_utils_1 = __webpack_require__(10);\nvar wordHelper_1 = __webpack_require__(11);\nvar TypeConverters = __webpack_require__(3);\nvar _modeId2WordDefinition = new Map();\nfunction setWordDefinitionFor(modeId, wordDefinition) {\n    _modeId2WordDefinition.set(modeId, wordDefinition);\n}\nexports.setWordDefinitionFor = setWordDefinitionFor;\nfunction getWordDefinitionFor(modeId) {\n    return _modeId2WordDefinition.get(modeId);\n}\nexports.getWordDefinitionFor = getWordDefinitionFor;\nfunction revealRangeInEditor(_editor, range, revealType) {\n    switch (revealType) {\n        case extHostTypes_1.TextEditorRevealType.Default:\n        case undefined:\n            _editor.revealRange(range, monaco_editor_1.editor.ScrollType.Smooth);\n            break;\n        case extHostTypes_1.TextEditorRevealType.InCenter:\n            _editor.revealRangeInCenter(range, monaco_editor_1.editor.ScrollType.Smooth);\n            break;\n        case extHostTypes_1.TextEditorRevealType.InCenterIfOutsideViewport:\n            _editor.revealRangeInCenterIfOutsideViewport(range, monaco_editor_1.editor.ScrollType.Smooth);\n            break;\n        case extHostTypes_1.TextEditorRevealType.AtTop:\n            _editor.revealRangeAtTop(range, monaco_editor_1.editor.ScrollType.Smooth);\n            break;\n        default:\n            console.warn(\"Unknown revealType: \" + revealType);\n            break;\n    }\n}\nvar TextDocument = /** @class */ (function () {\n    function TextDocument(model) {\n        this._textLines = [];\n        this.model = model;\n        this.languageId = getLanguageId(model);\n    }\n    Object.defineProperty(TextDocument.prototype, \"eol\", {\n        get: function () {\n            switch (this.model.getEOL()) {\n                case '\\n': {\n                    return extHostTypes_1.EndOfLine.LF;\n                }\n                case '\\r\\n': {\n                    return extHostTypes_1.EndOfLine.CRLF;\n                }\n                default: {\n                    throw new Error(\"invalid argument\");\n                }\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ;\n    Object.defineProperty(TextDocument.prototype, \"fileName\", {\n        get: function () {\n            return '';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextDocument.prototype, \"isClosed\", {\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextDocument.prototype, \"isDirty\", {\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextDocument.prototype, \"isUntitled\", {\n        get: function () {\n            return true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.model.getLineCount();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextDocument.prototype, \"_lines\", {\n        get: function () {\n            return this.model.getLinesContent();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TextDocument.prototype.getText = function (range) {\n        if (!range) {\n            return this.model.getValue();\n        }\n        return this.model.getValueInRange(TypeConverters.Range.from(range));\n    };\n    TextDocument.prototype.lineAt = function (lineOrPosition) {\n        var line;\n        if (lineOrPosition instanceof extHostTypes_1.Position) {\n            line = lineOrPosition.line;\n        }\n        else if (typeof lineOrPosition === 'number') {\n            line = lineOrPosition;\n        }\n        if (typeof line !== 'number' || line < 0 || line >= this._lines.length) {\n            throw new Error('Illegal value for `line`');\n        }\n        var result = this._textLines[line];\n        if (!result || result.lineNumber !== line || result.text !== this._lines[line]) {\n            var text = this._lines[line];\n            var firstNonWhitespaceCharacterIndex = /^(\\s*)/.exec(text)[1].length;\n            var range = new extHostTypes_1.Range(line, 0, line, text.length);\n            var rangeIncludingLineBreak = line < this._lines.length - 1\n                ? new extHostTypes_1.Range(line, 0, line + 1, 0)\n                : range;\n            result = Object.freeze({\n                lineNumber: line,\n                range: range,\n                rangeIncludingLineBreak: rangeIncludingLineBreak,\n                text: text,\n                firstNonWhitespaceCharacterIndex: firstNonWhitespaceCharacterIndex,\n                isEmptyOrWhitespace: firstNonWhitespaceCharacterIndex === text.length\n            });\n            this._textLines[line] = result;\n        }\n        return result;\n    };\n    TextDocument.prototype.offsetAt = function (position) {\n        return this.model.getOffsetAt(TypeConverters.Position.from(position));\n    };\n    TextDocument.prototype.positionAt = function (offset) {\n        return TypeConverters.Position.to(this.model.getPositionAt(offset));\n    };\n    TextDocument.prototype.save = function () {\n        throw new Error(\"Not implemented\");\n    };\n    TextDocument.prototype.validateRange = function (range) {\n        if (!(range instanceof extHostTypes_1.Range)) {\n            throw new Error('Invalid argument');\n        }\n        var start = this.validatePosition(range.start);\n        var end = this.validatePosition(range.end);\n        if (start === range.start && end === range.end) {\n            return range;\n        }\n        return new extHostTypes_1.Range(start.line, start.character, end.line, end.character);\n    };\n    TextDocument.prototype.validatePosition = function (position) {\n        if (!(position instanceof extHostTypes_1.Position)) {\n            throw new Error('Invalid argument');\n        }\n        var line = position.line, character = position.character;\n        var hasChanged = false;\n        if (line < 0) {\n            line = 0;\n            character = 0;\n            hasChanged = true;\n        }\n        else if (line >= this._lines.length) {\n            line = this._lines.length - 1;\n            character = this._lines[line].length;\n            hasChanged = true;\n        }\n        else {\n            var maxCharacter = this._lines[line].length;\n            if (character < 0) {\n                character = 0;\n                hasChanged = true;\n            }\n            else if (character > maxCharacter) {\n                character = maxCharacter;\n                hasChanged = true;\n            }\n        }\n        if (!hasChanged) {\n            return position;\n        }\n        return new extHostTypes_1.Position(line, character);\n    };\n    TextDocument.prototype.getWordRangeAtPosition = function (_position, regexp) {\n        var position = this.validatePosition(_position);\n        if (!regexp) {\n            // use default when custom-regexp isn't provided\n            regexp = getWordDefinitionFor(this.languageId);\n        }\n        else if (vscode_utils_1.regExpLeadsToEndlessLoop(regexp)) {\n            // use default when custom-regexp is bad\n            console.warn(\"[getWordRangeAtPosition]: ignoring custom regexp '\" + regexp.source + \"' because it matches the empty string.\");\n            regexp = getWordDefinitionFor(this.languageId);\n        }\n        var wordAtText = wordHelper_1.getWordAtText(position.character + 1, wordHelper_1.ensureValidWordDefinition(regexp), this._lines[position.line], 0);\n        if (wordAtText) {\n            return new extHostTypes_1.Range(position.line, wordAtText.startColumn - 1, position.line, wordAtText.endColumn - 1);\n        }\n        return undefined;\n    };\n    return TextDocument;\n}());\nexports.TextDocument = TextDocument;\nfunction getLanguageId(model) {\n    // @ts-ignore\n    return model.getLanguageId();\n}\nvar TextEditor = /** @class */ (function () {\n    function TextEditor(editor) {\n        this._disposed = false;\n        this.editor = editor;\n    }\n    Object.defineProperty(TextEditor.prototype, \"languageId\", {\n        get: function () {\n            return getLanguageId(this.editor.getModel());\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextEditor.prototype, \"document\", {\n        get: function () {\n            return new TextDocument(this.editor.getModel());\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextEditor.prototype, \"selection\", {\n        get: function () {\n            return TypeConverters.Selection.to(this.editor.getSelection());\n        },\n        set: function (value) {\n            this.editor.setSelection(TypeConverters.Selection.from(value));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextEditor.prototype, \"selections\", {\n        get: function () {\n            return this.editor.getSelections().map(function (s) { return TypeConverters.Selection.to(s); });\n        },\n        set: function (value) {\n            this.editor.setSelections(value.map(function (s) { return TypeConverters.Selection.from(s); }));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextEditor.prototype, \"visibleRanges\", {\n        get: function () {\n            return this.editor.getVisibleRanges().map(function (r) { return TypeConverters.Range.to(r); });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TextEditor.prototype.edit = function (callback, options) {\n        if (options === void 0) { options = {\n            undoStopBefore: true,\n            undoStopAfter: true\n        }; }\n        if (this._disposed) {\n            return Promise.reject(new Error('TextEditor#edit not possible on closed editors'));\n        }\n        var edit = new TextEditorEdit(this.document, options);\n        callback(edit);\n        return this._applyEdit(edit);\n    };\n    TextEditor.prototype._applyEdit = function (editBuilder) {\n        var editData = editBuilder.finalize();\n        // return when there is nothing to do\n        if (editData.edits.length === 0 && !editData.setEndOfLine) {\n            return Promise.resolve(null);\n        }\n        // check that the edits are not overlapping (i.e. illegal)\n        var editRanges = editData.edits.map(function (edit) { return edit.range; });\n        // sort ascending (by end and then by start)\n        editRanges.sort(function (a, b) {\n            if (a.end.line === b.end.line) {\n                if (a.end.character === b.end.character) {\n                    if (a.start.line === b.start.line) {\n                        return a.start.character - b.start.character;\n                    }\n                    return a.start.line - b.start.line;\n                }\n                return a.end.character - b.end.character;\n            }\n            return a.end.line - b.end.line;\n        });\n        // check that no edits are overlapping\n        for (var i = 0, count = editRanges.length - 1; i < count; i++) {\n            var rangeEnd = editRanges[i].end;\n            var nextRangeStart = editRanges[i + 1].start;\n            if (nextRangeStart.isBefore(rangeEnd)) {\n                // overlapping ranges\n                return Promise.reject(new Error('Overlapping ranges are not allowed!'));\n            }\n        }\n        // prepare data for serialization\n        var edits = editData.edits.map(function (edit) {\n            return {\n                range: TypeConverters.Range.from(edit.range),\n                text: edit.text,\n                forceMoveMarkers: edit.forceMoveMarkers\n            };\n        });\n        this.editor.getModel().pushEditOperations(this.editor.getSelections(), edits, function () {\n            return [];\n        });\n        return Promise.resolve(null);\n    };\n    // insertSnippet(snippet: SnippetString, where?: Position | readonly Position[] | Range | readonly Range[], options: { undoStopBefore: boolean; undoStopAfter: boolean; } = {\n    //     undoStopBefore: true,\n    //     undoStopAfter: true\n    // }): Promise<boolean> {}\n    // hide(): void {\n    //     throw new Error(\"Not implemented\")\n    // }\n    // @ts-ignore\n    // show(column?: ViewColumn): void {\n    //     throw new Error(\"Not implemented\")\n    // }\n    TextEditor.prototype.revealRange = function (range, revealType) {\n        revealRangeInEditor(this.editor, TypeConverters.Range.from(range), revealType);\n    };\n    // @ts-ignore\n    // setDecorations(decorationType: TextEditorDecorationType, rangesOrOptions: Range[] | DecorationOptions[]): void {\n    //     throw new Error(\"Not implemented\")\n    // }\n    TextEditor.prototype.applyEdit = function (edit, newSelections) {\n        if (!newSelections) {\n            newSelections = [];\n        }\n        this.editor.getModel().pushEditOperations(this.editor.getSelections(), TypeConverters.WorkspaceEdit.from(edit), function () {\n            return newSelections.map(function (s) { return TypeConverters.Selection.from(s); });\n        });\n        return Promise.resolve(null);\n    };\n    TextEditor.prototype.addAction = function (param) {\n        this.editor.addAction(param);\n    };\n    TextEditor.prototype.executeCommand = function (commandId) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        switch (commandId) {\n            case 'type':\n                this.editor.trigger('keyboard', commandId, rest[0]);\n                return Promise.resolve();\n            case 'tab':\n            case 'deleteLeft':\n                this.editor.trigger('keyboard', commandId, undefined);\n                return Promise.resolve();\n            default:\n                var action = this.editor.getAction(commandId);\n                if (action) {\n                    if (action.isSupported()) {\n                        return action.run();\n                    }\n                }\n                else {\n                    new Error(\"unknown action id \" + commandId);\n                }\n        }\n    };\n    TextEditor.prototype.getConfiguration = function (configurationId) {\n        switch (configurationId) {\n            case '':\n                break;\n            default:\n                return new UndefinedConfiguration();\n        }\n    };\n    return TextEditor;\n}());\nexports.TextEditor = TextEditor;\nvar UndefinedConfiguration = /** @class */ (function () {\n    function UndefinedConfiguration() {\n    }\n    UndefinedConfiguration.prototype.get = function (_) {\n        return undefined;\n    };\n    return UndefinedConfiguration;\n}());\nvar TextEditorEdit = /** @class */ (function () {\n    function TextEditorEdit(document, options) {\n        this._collectedEdits = [];\n        this._setEndOfLine = undefined;\n        this._finalized = false;\n        this._document = document;\n        this._documentVersionId = document.version;\n        this._undoStopBefore = options.undoStopBefore;\n        this._undoStopAfter = options.undoStopAfter;\n    }\n    TextEditorEdit.prototype.finalize = function () {\n        this._finalized = true;\n        return {\n            documentVersionId: this._documentVersionId,\n            edits: this._collectedEdits,\n            setEndOfLine: this._setEndOfLine,\n            undoStopBefore: this._undoStopBefore,\n            undoStopAfter: this._undoStopAfter\n        };\n    };\n    TextEditorEdit.prototype._throwIfFinalized = function () {\n        if (this._finalized) {\n            throw new Error('Edit is only valid while callback runs');\n        }\n    };\n    TextEditorEdit.prototype.replace = function (location, value) {\n        this._throwIfFinalized();\n        var range = null;\n        if (location instanceof extHostTypes_1.Position) {\n            range = new extHostTypes_1.Range(location, location);\n        }\n        else if (location instanceof extHostTypes_1.Range) {\n            range = location;\n        }\n        else {\n            throw new Error('Unrecognized location');\n        }\n        this._pushEdit(range, value, false);\n    };\n    TextEditorEdit.prototype.insert = function (location, value) {\n        this._throwIfFinalized();\n        this._pushEdit(new extHostTypes_1.Range(location, location), value, true);\n    };\n    TextEditorEdit.prototype.delete = function (location) {\n        this._throwIfFinalized();\n        var range = null;\n        if (location instanceof extHostTypes_1.Range) {\n            range = location;\n        }\n        else {\n            throw new Error('Unrecognized location');\n        }\n        this._pushEdit(range, null, true);\n    };\n    TextEditorEdit.prototype._pushEdit = function (range, text, forceMoveMarkers) {\n        var validRange = this._document.validateRange(range);\n        this._collectedEdits.push({\n            range: validRange,\n            text: text,\n            forceMoveMarkers: forceMoveMarkers\n        });\n    };\n    TextEditorEdit.prototype.setEndOfLine = function (endOfLine) {\n        this._throwIfFinalized();\n        if (endOfLine !== extHostTypes_1.EndOfLine.LF && endOfLine !== extHostTypes_1.EndOfLine.CRLF) {\n            throw new Error('Illegal argument endOfLine');\n        }\n        this._setEndOfLine = endOfLine;\n    };\n    return TextEditorEdit;\n}());\nexports.TextEditorEdit = TextEditorEdit;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceEdit = exports.EndOfLine = exports.Position = exports.Range = exports.Selection = void 0;\nvar monaco_editor_1 = __webpack_require__(0);\nvar vscode = __webpack_require__(1);\nvar Selection;\n(function (Selection) {\n    function to(selection) {\n        var selectionStartLineNumber = selection.selectionStartLineNumber, selectionStartColumn = selection.selectionStartColumn, positionLineNumber = selection.positionLineNumber, positionColumn = selection.positionColumn;\n        var start = new vscode.Position(selectionStartLineNumber - 1, selectionStartColumn - 1);\n        var end = new vscode.Position(positionLineNumber - 1, positionColumn - 1);\n        return new vscode.Selection(start, end);\n    }\n    Selection.to = to;\n    function from(selection) {\n        var anchor = selection.anchor, active = selection.active;\n        return new monaco_editor_1.Selection(anchor.line + 1, anchor.character + 1, active.line + 1, active.character + 1);\n    }\n    Selection.from = from;\n})(Selection = exports.Selection || (exports.Selection = {}));\nvar Range;\n(function (Range) {\n    function from(range) {\n        if (!range) {\n            return undefined;\n        }\n        var start = range.start, end = range.end;\n        return new monaco_editor_1.Range(start.line + 1, start.character + 1, end.line + 1, end.character + 1);\n    }\n    Range.from = from;\n    function to(range) {\n        if (!range) {\n            return undefined;\n        }\n        var startLineNumber = range.startLineNumber, startColumn = range.startColumn, endLineNumber = range.endLineNumber, endColumn = range.endColumn;\n        return new vscode.Range(startLineNumber - 1, startColumn - 1, endLineNumber - 1, endColumn - 1);\n    }\n    Range.to = to;\n})(Range = exports.Range || (exports.Range = {}));\nvar Position;\n(function (Position) {\n    function to(position) {\n        return new vscode.Position(position.lineNumber - 1, position.column - 1);\n    }\n    Position.to = to;\n    function from(position) {\n        return { lineNumber: position.line + 1, column: position.character + 1 };\n    }\n    Position.from = from;\n})(Position = exports.Position || (exports.Position = {}));\nvar EndOfLine;\n(function (EndOfLine) {\n    function from(eol) {\n        if (eol === vscode.EndOfLine.CRLF) {\n            return monaco_editor_1.editor.EndOfLineSequence.CRLF;\n        }\n        else if (eol === vscode.EndOfLine.LF) {\n            return monaco_editor_1.editor.EndOfLineSequence.LF;\n        }\n        return undefined;\n    }\n    EndOfLine.from = from;\n    function to(eol) {\n        if (eol === monaco_editor_1.editor.EndOfLineSequence.CRLF) {\n            return vscode.EndOfLine.CRLF;\n        }\n        else if (eol === monaco_editor_1.editor.EndOfLineSequence.LF) {\n            return vscode.EndOfLine.LF;\n        }\n        return undefined;\n    }\n    EndOfLine.to = to;\n})(EndOfLine = exports.EndOfLine || (exports.EndOfLine = {}));\nvar WorkspaceEdit;\n(function (WorkspaceEdit) {\n    function from(value) {\n        var edits = [];\n        for (var _i = 0, _a = value._allEntries(); _i < _a.length; _i++) {\n            var entry = _a[_i];\n            var uri = entry[0], uriOrEdits = entry[1];\n            if (Array.isArray(uriOrEdits)) {\n                // text edits\n                for (var _b = 0, uriOrEdits_1 = uriOrEdits; _b < uriOrEdits_1.length; _b++) {\n                    var e = uriOrEdits_1[_b];\n                    edits.push({\n                        range: Range.from(e.range),\n                        text: e.newText,\n                        forceMoveMarkers: false\n                    });\n                }\n            }\n            else {\n                // resource edits\n                throw new Error(\"Not implemented for \" + uri);\n            }\n        }\n        return edits;\n    }\n    WorkspaceEdit.from = from;\n})(WorkspaceEdit = exports.WorkspaceEdit || (exports.WorkspaceEdit = {}));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSingleLink = exports.activateFormatting = exports.addKeybinding = void 0;\nvar monaco_editor_1 = __webpack_require__(0);\nvar listEditing_1 = __webpack_require__(5);\nvar extHostTypes_1 = __webpack_require__(1);\nfunction addKeybinding(editor, name, fun, keybindings, label, context, contextMenuGroupId) {\n    if (contextMenuGroupId === void 0) { contextMenuGroupId = \"markdown.extension.editing\"; }\n    editor.addAction({\n        contextMenuGroupId: contextMenuGroupId,\n        contextMenuOrder: 0,\n        id: \"markdown.extension.editing.\" + name,\n        keybindingContext: context,\n        keybindings: keybindings,\n        label: label,\n        precondition: \"\",\n        run: function (_) {\n            fun(editor);\n            return undefined;\n        }\n    });\n}\nexports.addKeybinding = addKeybinding;\nfunction activateFormatting(editor) {\n    addKeybinding(editor, \"toggleBold\", toggleBold, [monaco_editor_1.KeyMod.CtrlCmd | monaco_editor_1.KeyCode.KeyB], \"Toggle bold\");\n    addKeybinding(editor, \"toggleItalic\", toggleItalic, [monaco_editor_1.KeyMod.CtrlCmd | monaco_editor_1.KeyCode.KeyI], \"Toggle italic\");\n    addKeybinding(editor, \"toggleCodeSpan\", toggleCodeSpan, [monaco_editor_1.KeyMod.CtrlCmd | monaco_editor_1.KeyCode.Backquote], \"Toggle code span\");\n    addKeybinding(editor, \"toggleStrikethrough\", toggleStrikethrough, [monaco_editor_1.KeyMod.Alt | monaco_editor_1.KeyCode.KeyS], \"Toggle strikethrough\");\n    addKeybinding(editor, \"toggleMath\", toggleMath, [monaco_editor_1.KeyMod.CtrlCmd | monaco_editor_1.KeyCode.KeyM], \"Toggle math\");\n    addKeybinding(editor, \"toggleMathReverse\", toggleMathReverse, [monaco_editor_1.KeyMod.CtrlCmd | monaco_editor_1.KeyMod.Shift | monaco_editor_1.KeyCode.KeyM], \"Toggle math reverse\");\n    addKeybinding(editor, \"toggleHeadingUp\", toggleHeadingUp, [monaco_editor_1.KeyMod.WinCtrl | monaco_editor_1.KeyMod.Shift | monaco_editor_1.KeyCode.BracketLeft], \"Heading up\");\n    addKeybinding(editor, \"toggleHeadingDown\", toggleHeadingDown, [monaco_editor_1.KeyMod.WinCtrl | monaco_editor_1.KeyMod.Shift | monaco_editor_1.KeyCode.BracketRight], \"Heading down\");\n    addKeybinding(editor, \"toggleList\", toggleList, [monaco_editor_1.KeyMod.CtrlCmd | monaco_editor_1.KeyCode.KeyL], \"Toggle list\");\n    // addKeybinding(editor, paste, [KeyMod.CtrlCmd | KeyCode.KEY_B], \"Toggle bold\");\n}\nexports.activateFormatting = activateFormatting;\n/**\n * Here we store Regexp to check if the text is the single link.\n */\nvar singleLinkRegex = createLinkRegex();\n// Return Promise because need to chain operations in unit tests\nfunction toggleBold(editor) {\n    return styleByWrapping(editor, '**');\n}\nfunction toggleItalic(editor) {\n    // let indicator = workspace.getConfiguration('markdown.extension.italic').get<string>('indicator');\n    return styleByWrapping(editor, '*');\n}\nfunction toggleCodeSpan(editor) {\n    return styleByWrapping(editor, '`');\n}\nfunction toggleStrikethrough(editor) {\n    return styleByWrapping(editor, '~~');\n}\nvar maxHeading = '######';\nfunction toggleHeadingUp(editor) {\n    var lineIndex = editor.selection.active.line;\n    var lineText = editor.document.lineAt(lineIndex).text;\n    return editor.edit(function (editBuilder) {\n        if (!lineText.startsWith('#')) { // Not a heading\n            editBuilder.insert(new extHostTypes_1.Position(lineIndex, 0), '# ');\n        }\n        else if (lineText.startsWith(maxHeading)) { // Reset heading at 6 level\n            var deleteIndex = lineText.startsWith(maxHeading + ' ') ? maxHeading.length + 1 : maxHeading.length;\n            editBuilder.delete(new extHostTypes_1.Range(new extHostTypes_1.Position(lineIndex, 0), new extHostTypes_1.Position(lineIndex, deleteIndex)));\n        }\n        else {\n            editBuilder.insert(new extHostTypes_1.Position(lineIndex, 0), '#');\n        }\n    });\n}\nfunction toggleHeadingDown(editor) {\n    var lineIndex = editor.selection.active.line;\n    var lineText = editor.document.lineAt(lineIndex).text;\n    editor.edit(function (editBuilder) {\n        if (lineText.startsWith('# ')) { // Heading level 1\n            editBuilder.delete(new extHostTypes_1.Range(new extHostTypes_1.Position(lineIndex, 0), new extHostTypes_1.Position(lineIndex, 2)));\n        }\n        else if (lineText.startsWith('#')) { // Heading (but not level 1)\n            editBuilder.delete(new extHostTypes_1.Range(new extHostTypes_1.Position(lineIndex, 0), new extHostTypes_1.Position(lineIndex, 1)));\n        }\n        else { // No heading\n            editBuilder.insert(new extHostTypes_1.Position(lineIndex, 0), maxHeading + ' ');\n        }\n    });\n}\nvar MathBlockState;\n(function (MathBlockState) {\n    // State 1: not in any others states\n    MathBlockState[MathBlockState[\"NONE\"] = 0] = \"NONE\";\n    // State 2: $|$\n    MathBlockState[MathBlockState[\"INLINE\"] = 1] = \"INLINE\";\n    // State 3: $$ | $$\n    MathBlockState[MathBlockState[\"SINGLE_DISPLAYED\"] = 2] = \"SINGLE_DISPLAYED\";\n    // State 4:\n    // $$\n    // |\n    // $$\n    MathBlockState[MathBlockState[\"MULTI_DISPLAYED\"] = 3] = \"MULTI_DISPLAYED\";\n})(MathBlockState || (MathBlockState = {}));\nfunction getMathState(editor, cursor) {\n    if (getContext(editor, cursor, '$') === '$|$') {\n        return MathBlockState.INLINE;\n    }\n    else if (getContext(editor, cursor, '$$ ', ' $$') === '$$ | $$') {\n        return MathBlockState.SINGLE_DISPLAYED;\n    }\n    else if (editor.document.lineAt(cursor.line).text === ''\n        && cursor.line > 0\n        && editor.document.lineAt(cursor.line - 1).text === '$$'\n        && cursor.line < editor.document.lineCount - 1\n        && editor.document.lineAt(cursor.line + 1).text === '$$') {\n        return MathBlockState.MULTI_DISPLAYED;\n    }\n    else {\n        return MathBlockState.NONE;\n    }\n}\n/**\n * Modify the document, change from `oldMathBlockState` to `newMathBlockState`.\n * @param editor\n * @param cursor\n * @param oldMathBlockState\n * @param newMathBlockState\n */\nfunction setMathState(editor, cursor, oldMathBlockState, newMathBlockState) {\n    // Step 1: Delete old math block.\n    editor.edit(function (editBuilder) {\n        var rangeToBeDeleted;\n        switch (oldMathBlockState) {\n            case MathBlockState.NONE:\n                rangeToBeDeleted = new extHostTypes_1.Range(cursor, cursor);\n                break;\n            case MathBlockState.INLINE:\n                rangeToBeDeleted = new extHostTypes_1.Range(new extHostTypes_1.Position(cursor.line, cursor.character - 1), new extHostTypes_1.Position(cursor.line, cursor.character + 1));\n                break;\n            case MathBlockState.SINGLE_DISPLAYED:\n                rangeToBeDeleted = new extHostTypes_1.Range(new extHostTypes_1.Position(cursor.line, cursor.character - 3), new extHostTypes_1.Position(cursor.line, cursor.character + 3));\n                break;\n            case MathBlockState.MULTI_DISPLAYED:\n                rangeToBeDeleted = new extHostTypes_1.Range(new extHostTypes_1.Position(cursor.line - 1, 0), new extHostTypes_1.Position(cursor.line + 1, 2));\n                break;\n        }\n        editBuilder.delete(rangeToBeDeleted);\n    }).then(function () {\n        // Step 2: Insert new math block.\n        editor.edit(function (editBuilder) {\n            var newCursor = editor.selection.active;\n            var stringToBeInserted;\n            switch (newMathBlockState) {\n                case MathBlockState.NONE:\n                    stringToBeInserted = '';\n                    break;\n                case MathBlockState.INLINE:\n                    stringToBeInserted = '$$';\n                    break;\n                case MathBlockState.SINGLE_DISPLAYED:\n                    stringToBeInserted = '$$  $$';\n                    break;\n                case MathBlockState.MULTI_DISPLAYED:\n                    stringToBeInserted = '$$\\n\\n$$';\n                    break;\n            }\n            editBuilder.insert(newCursor, stringToBeInserted);\n        }).then(function () {\n            // Step 3: Move cursor to the middle.\n            var newCursor = editor.selection.active;\n            var newPosition;\n            switch (newMathBlockState) {\n                case MathBlockState.NONE:\n                    newPosition = newCursor;\n                    break;\n                case MathBlockState.INLINE:\n                    newPosition = newCursor.with(newCursor.line, newCursor.character - 1);\n                    break;\n                case MathBlockState.SINGLE_DISPLAYED:\n                    newPosition = newCursor.with(newCursor.line, newCursor.character - 3);\n                    break;\n                case MathBlockState.MULTI_DISPLAYED:\n                    newPosition = newCursor.with(newCursor.line - 1, 0);\n                    break;\n            }\n            editor.selection = new extHostTypes_1.Selection(newPosition, newPosition);\n        });\n    });\n}\nvar transTable = [\n    MathBlockState.NONE,\n    MathBlockState.INLINE,\n    MathBlockState.MULTI_DISPLAYED,\n    MathBlockState.SINGLE_DISPLAYED\n];\nvar reverseTransTable = new (Array.bind.apply(Array, __spreadArrays([void 0], transTable)))().reverse();\nfunction toggleMath(editor) {\n    _toggleMath(editor, transTable);\n}\nfunction toggleMathReverse(editor) {\n    _toggleMath(editor, reverseTransTable);\n}\nfunction _toggleMath(editor, transTable) {\n    if (!editor.selection.isEmpty)\n        return;\n    var cursor = editor.selection.active;\n    var oldMathBlockState = getMathState(editor, cursor);\n    var currentStateIndex = transTable.indexOf(oldMathBlockState);\n    setMathState(editor, cursor, oldMathBlockState, transTable[(currentStateIndex + 1) % transTable.length]);\n}\nfunction toggleList(editor) {\n    var doc = editor.document;\n    var batchEdit = new extHostTypes_1.WorkspaceEdit();\n    editor.selections.forEach(function (selection) {\n        if (selection.isEmpty) {\n            toggleListSingleLine(doc, selection.active.line, batchEdit);\n        }\n        else {\n            for (var i = selection.start.line; i <= selection.end.line; i++) {\n                toggleListSingleLine(doc, i, batchEdit);\n            }\n        }\n    });\n    return editor.applyEdit(batchEdit, [])\n        .then(function () { return listEditing_1.fixMarker(editor); });\n}\nfunction toggleListSingleLine(doc, line, wsEdit) {\n    var lineText = doc.lineAt(line).text;\n    var indentation = lineText.trim().length === 0 ? lineText.length : lineText.indexOf(lineText.trim());\n    var lineTextContent = lineText.substr(indentation);\n    if (lineTextContent.startsWith(\"- \")) {\n        wsEdit.replace(doc.uri, new extHostTypes_1.Range(line, indentation, line, indentation + 2), \"* \");\n    }\n    else if (lineTextContent.startsWith(\"* \")) {\n        wsEdit.replace(doc.uri, new extHostTypes_1.Range(line, indentation, line, indentation + 2), \"+ \");\n    }\n    else if (lineTextContent.startsWith(\"+ \")) {\n        wsEdit.replace(doc.uri, new extHostTypes_1.Range(line, indentation, line, indentation + 2), \"1. \");\n    }\n    else if (/^\\d\\. /.test(lineTextContent)) {\n        wsEdit.replace(doc.uri, new extHostTypes_1.Range(line, indentation + 1, line, indentation + 2), \")\");\n    }\n    else if (/^\\d\\) /.test(lineTextContent)) {\n        wsEdit.delete(doc.uri, new extHostTypes_1.Range(line, indentation, line, indentation + 3));\n    }\n    else {\n        wsEdit.insert(doc.uri, new extHostTypes_1.Position(line, indentation), \"- \");\n    }\n}\n// async function paste() {\n//     const editor = window.activeTextEditor;\n//     const selection = editor.selection;\n//     if (selection.isSingleLine && !isSingleLink(editor.document.getText(selection))) {\n//         const text = await env.clipboard.readText();\n//         if (isSingleLink(text)) {\n//             return commands.executeCommand(\"editor.action.insertSnippet\", { \"snippet\": `[$TM_SELECTED_TEXT$0](${text})` });\n//         }\n//     }\n//     return commands.executeCommand(\"editor.action.clipboardPasteAction\");\n// }\n/**\n * Creates Regexp to check if the text is a link (further detailes in the isSingleLink() documentation).\n *\n * @return Regexp\n */\nfunction createLinkRegex() {\n    // unicode letters range(must not be a raw string)\n    var ul = '\\\\u00a1-\\\\uffff';\n    // IP patterns\n    var ipv4_re = '(?:25[0-5]|2[0-4]\\\\d|[0-1]?\\\\d?\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|[0-1]?\\\\d?\\\\d)){3}';\n    var ipv6_re = '\\\\[[0-9a-f:\\\\.]+\\\\]'; // simple regex (in django it is validated additionally)\n    // Host patterns\n    var hostname_re = '[a-z' + ul + '0-9](?:[a-z' + ul + '0-9-]{0,61}[a-z' + ul + '0-9])?';\n    // Max length for domain name labels is 63 characters per RFC 1034 sec. 3.1\n    var domain_re = '(?:\\\\.(?!-)[a-z' + ul + '0-9-]{1,63})*';\n    var tld_re = ''\n        + '\\\\.' // dot\n        + '(?!-)' // can't start with a dash\n        + '(?:[a-z' + ul + '-]{2,63}' // domain label\n        + '|xn--[a-z0-9]{1,59})' // or punycode label\n        // + '(?<!-)'                            // can't end with a dash\n        + '\\\\.?' // may have a trailing dot\n    ;\n    var host_re = '(' + hostname_re + domain_re + tld_re + '|localhost)';\n    var pattern = ''\n        + '^(?:[a-z0-9\\\\.\\\\-\\\\+]*)://' // scheme is not validated (in django it is validated additionally)\n        + '(?:[^\\\\s:@/]+(?::[^\\\\s:@/]*)?@)?' // user: pass authentication\n        + '(?:' + ipv4_re + '|' + ipv6_re + '|' + host_re + ')'\n        + '(?::\\\\d{2,5})?' // port\n        + '(?:[/?#][^\\\\s]*)?' // resource path\n        + '$' // end of string\n    ;\n    return new RegExp(pattern, 'i');\n}\n/**\n * Checks if the string is a link. The list of link examples you can see in the tests file\n * `test/linksRecognition.test.ts`. This code ported from django's\n * [URLValidator](https://github.com/django/django/blob/2.2b1/django/core/validators.py#L74) with some simplifyings.\n *\n * @param text string to check\n *\n * @return boolean\n */\nfunction isSingleLink(text) {\n    return singleLinkRegex.test(text);\n}\nexports.isSingleLink = isSingleLink;\nfunction styleByWrapping(editor, startPattern, endPattern) {\n    if (endPattern == undefined) {\n        endPattern = startPattern;\n    }\n    var selections = editor.selections;\n    var batchEdit = new extHostTypes_1.WorkspaceEdit();\n    var shifts = [];\n    var newSelections = selections.slice();\n    selections.forEach(function (selection, i) {\n        var cursorPos = selection.active;\n        var shift = shifts.map(function (_a) {\n            var pos = _a[0], s = _a[1];\n            return (selection.start.line == pos.line && selection.start.character >= pos.character) ? s : 0;\n        })\n            .reduce(function (a, b) { return a + b; }, 0);\n        if (selection.isEmpty) {\n            // No selected text\n            if (startPattern !== '~~' && getContext(editor, cursorPos, startPattern) === startPattern + \"text|\" + endPattern) {\n                // `**text|**` to `**text**|`\n                var newCursorPos = cursorPos.with({ character: cursorPos.character + shift + endPattern.length });\n                newSelections[i] = new extHostTypes_1.Selection(newCursorPos, newCursorPos);\n                return;\n            }\n            else if (getContext(editor, cursorPos, startPattern) === startPattern + \"|\" + endPattern) {\n                // `**|**` to `|`\n                var start = cursorPos.with({ character: cursorPos.character - startPattern.length });\n                var end = cursorPos.with({ character: cursorPos.character + endPattern.length });\n                wrapRange(editor, batchEdit, shifts, newSelections, i, shift, cursorPos, new extHostTypes_1.Range(start, end), false, startPattern);\n            }\n            else {\n                // Select word under cursor\n                var wordRange = editor.document.getWordRangeAtPosition(cursorPos);\n                if (wordRange == undefined) {\n                    wordRange = selection;\n                }\n                // One special case: toggle strikethrough in task list\n                var currentTextLine = editor.document.lineAt(cursorPos.line);\n                if (startPattern === '~~' && /^\\s*[\\*\\+\\-] (\\[[ x]\\] )? */g.test(currentTextLine.text)) {\n                    wordRange = currentTextLine.range.with(new extHostTypes_1.Position(cursorPos.line, currentTextLine.text.match(/^\\s*[\\*\\+\\-] (\\[[ x]\\] )? */g)[0].length));\n                }\n                wrapRange(editor, batchEdit, shifts, newSelections, i, shift, cursorPos, wordRange, false, startPattern);\n            }\n        }\n        else {\n            // Text selected\n            wrapRange(editor, batchEdit, shifts, newSelections, i, shift, cursorPos, selection, true, startPattern);\n        }\n    });\n    var hasSelection = editor.selection && !editor.selection.isEmpty;\n    return editor.applyEdit(batchEdit, newSelections).then(function () {\n        if (!hasSelection) {\n            editor.selections = newSelections;\n        }\n    });\n}\n/**\n * Add or remove `startPattern`/`endPattern` according to the context\n * @param editor\n * @param options The undo/redo behavior\n * @param cursor cursor position\n * @param range range to be replaced\n * @param isSelected is this range selected\n * @param startPtn\n * @param endPtn\n */\nfunction wrapRange(editor, wsEdit, shifts, newSelections, i, shift, cursor, range, isSelected, startPtn, endPtn) {\n    if (endPtn == undefined) {\n        endPtn = startPtn;\n    }\n    var text = editor.document.getText(range);\n    var prevSelection = newSelections[i];\n    var ptnLength = (startPtn + endPtn).length;\n    var newCursorPos = cursor.with({ character: cursor.character + shift });\n    var newSelection;\n    if (isWrapped(text, startPtn)) {\n        // remove start/end patterns from range\n        wsEdit.replace(editor.document.uri, range, text.substr(startPtn.length, text.length - ptnLength));\n        shifts.push([range.end, -ptnLength]);\n        // Fix cursor position\n        if (!isSelected) {\n            if (!range.isEmpty) { // means quick styling\n                if (cursor.character == range.end.character) {\n                    newCursorPos = cursor.with({ character: cursor.character + shift - ptnLength });\n                }\n                else {\n                    newCursorPos = cursor.with({ character: cursor.character + shift - startPtn.length });\n                }\n            }\n            else { // means `**|**` -> `|`\n                newCursorPos = cursor.with({ character: cursor.character + shift + startPtn.length });\n            }\n            newSelection = new extHostTypes_1.Selection(newCursorPos, newCursorPos);\n        }\n        else {\n            newSelection = new extHostTypes_1.Selection(prevSelection.start.with({ character: prevSelection.start.character + shift }), prevSelection.end.with({ character: prevSelection.end.character + shift - ptnLength }));\n        }\n    }\n    else {\n        // add start/end patterns around range\n        wsEdit.replace(editor.document.uri, range, startPtn + text + endPtn);\n        shifts.push([range.end, ptnLength]);\n        // Fix cursor position\n        if (!isSelected) {\n            if (!range.isEmpty) { // means quick styling\n                if (cursor.character == range.end.character) {\n                    newCursorPos = cursor.with({ character: cursor.character + shift + ptnLength });\n                }\n                else {\n                    newCursorPos = cursor.with({ character: cursor.character + shift + startPtn.length });\n                }\n            }\n            else { // means `|` -> `**|**`\n                newCursorPos = cursor.with({ character: cursor.character + shift + startPtn.length });\n            }\n            newSelection = new extHostTypes_1.Selection(newCursorPos, newCursorPos);\n        }\n        else {\n            newSelection = new extHostTypes_1.Selection(prevSelection.start.with({ character: prevSelection.start.character + shift }), prevSelection.end.with({ character: prevSelection.end.character + shift + ptnLength }));\n        }\n    }\n    newSelections[i] = newSelection;\n}\nfunction isWrapped(text, startPattern, endPattern) {\n    if (endPattern == undefined) {\n        endPattern = startPattern;\n    }\n    return text.startsWith(startPattern) && text.endsWith(endPattern);\n}\nfunction getContext(editor, cursorPos, startPattern, endPattern) {\n    if (endPattern == undefined) {\n        endPattern = startPattern;\n    }\n    var startPositionCharacter = cursorPos.character - startPattern.length;\n    var endPositionCharacter = cursorPos.character + endPattern.length;\n    if (startPositionCharacter < 0) {\n        startPositionCharacter = 0;\n    }\n    var leftText = editor.document.getText(new extHostTypes_1.Range(cursorPos.line, startPositionCharacter, cursorPos.line, cursorPos.character));\n    var rightText = editor.document.getText(new extHostTypes_1.Range(cursorPos.line, cursorPos.character, cursorPos.line, endPositionCharacter));\n    if (rightText == endPattern) {\n        if (leftText == startPattern) {\n            return startPattern + \"|\" + endPattern;\n        }\n        else {\n            return startPattern + \"text|\" + endPattern;\n        }\n    }\n    return '|';\n}\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.deactivate = exports.fixMarker = exports.activateListEditing = void 0;\nvar util_1 = __webpack_require__(6);\nvar monaco_editor_1 = __webpack_require__(0);\nvar extHostTypes_1 = __webpack_require__(1);\nvar formatting_1 = __webpack_require__(4);\nfunction onShiftTabKey(editor) {\n    onTabKey(editor, 'shift');\n}\nfunction activateListEditing(editor) {\n    var editorContext = \"editorTextFocus && !editorReadonly && !suggestWidgetVisible\";\n    formatting_1.addKeybinding(editor, \"onEnterKey\", onEnterKey, [monaco_editor_1.KeyCode.Enter], \"\", editorContext, null);\n    formatting_1.addKeybinding(editor, \"onCtrlEnterKey\", onCtrlEnterKey, [monaco_editor_1.KeyCode.Enter | monaco_editor_1.KeyMod.CtrlCmd], \"\", editorContext, null);\n    formatting_1.addKeybinding(editor, \"onShiftEnterKey\", onShiftEnterKey, [monaco_editor_1.KeyCode.Enter | monaco_editor_1.KeyMod.Shift], \"\", editorContext, null);\n    formatting_1.addKeybinding(editor, \"onTabKey\", onTabKey, [monaco_editor_1.KeyCode.Tab], \"\", editorContext, null);\n    formatting_1.addKeybinding(editor, \"onShiftTabKey\", onShiftTabKey, [monaco_editor_1.KeyCode.Tab | monaco_editor_1.KeyMod.Shift], \"\", editorContext, null);\n    formatting_1.addKeybinding(editor, \"onBackspaceKey\", onBackspaceKey, [monaco_editor_1.KeyCode.Backspace], \"\", editorContext, null);\n    //\n    // context.subscriptions.push(\n    //     commands.registerCommand('markdown.extension.checkTaskList', checkTaskList),\n    //     commands.registerCommand('markdown.extension.onMoveLineDown', onMoveLineDown),\n    //     commands.registerCommand('markdown.extension.onMoveLineUp', onMoveLineUp),\n    //     commands.registerCommand('markdown.extension.onCopyLineDown', onCopyLineDown),\n    //     commands.registerCommand('markdown.extension.onCopyLineUp', onCopyLineUp),\n    //     commands.registerCommand('markdown.extension.onIndentLines', onIndentLines),\n    //     commands.registerCommand('markdown.extension.onOutdentLines', onOutdentLines)\n    // );\n}\nexports.activateListEditing = activateListEditing;\nfunction onShiftEnterKey(editor) {\n    onEnterKey(editor, 'shift');\n}\nfunction onCtrlEnterKey(editor) {\n    onEnterKey(editor, 'ctrl');\n}\nfunction onEnterKey(editor, modifiers) {\n    var cursorPos = editor.selection.active;\n    var line = editor.document.lineAt(cursorPos.line);\n    var textBeforeCursor = line.text.substr(0, cursorPos.character);\n    var textAfterCursor = line.text.substr(cursorPos.character);\n    var lineBreakPos = cursorPos;\n    if (modifiers == 'ctrl') {\n        lineBreakPos = line.range.end;\n    }\n    if (modifiers == 'shift' || util_1.isInFencedCodeBlock(editor.document, cursorPos.line)) {\n        return asNormal(editor, 'enter', modifiers);\n    }\n    // If it's an empty list item, remove it\n    if (/^(>|([-+*]|[0-9]+[.)])( +\\[[ x]\\])?)$/.test(textBeforeCursor.trim()) && textAfterCursor.trim().length == 0) {\n        return editor.edit(function (editBuilder) {\n            editBuilder.delete(line.range);\n            editBuilder.insert(line.range.end, '\\n');\n        }).then(function () {\n            editor.revealRange(editor.selection);\n        }).then(function () { return fixMarker(editor, findNextMarkerLineNumber(editor)); });\n    }\n    var matches;\n    if (/^> /.test(textBeforeCursor)) {\n        // Quote block\n        return editor.edit(function (editBuilder) {\n            editBuilder.insert(lineBreakPos, \"\\n> \");\n        }).then(function () {\n            // Fix cursor position\n            if (modifiers == 'ctrl' && !cursorPos.isEqual(lineBreakPos)) {\n                var newCursorPos = cursorPos.with(line.lineNumber + 1, 2);\n                editor.selection = new extHostTypes_1.Selection(newCursorPos, newCursorPos);\n            }\n        }).then(function () {\n            editor.revealRange(editor.selection);\n        });\n    }\n    else if ((matches = /^(\\s*[-+*] +(\\[[ x]\\] +)?)/.exec(textBeforeCursor)) !== null) {\n        // Unordered list\n        return editor.edit(function (editBuilder) {\n            editBuilder.insert(lineBreakPos, \"\\n\" + matches[1].replace('[x]', '[ ]'));\n        }).then(function () {\n            // Fix cursor position\n            if (modifiers == 'ctrl' && !cursorPos.isEqual(lineBreakPos)) {\n                var newCursorPos = cursorPos.with(line.lineNumber + 1, matches[1].length);\n                editor.selection = new extHostTypes_1.Selection(newCursorPos, newCursorPos);\n            }\n        }).then(function () {\n            editor.revealRange(editor.selection);\n        });\n    }\n    else if ((matches = /^(\\s*)([0-9]+)([.)])( +)((\\[[ x]\\] +)?)/.exec(textBeforeCursor)) !== null) {\n        // Ordered list\n        var config = editor.getConfiguration('markdown.extension.orderedList').get('marker');\n        var marker = '1';\n        var leadingSpace = matches[1];\n        var previousMarker = matches[2];\n        var delimiter = matches[3];\n        var trailingSpace = matches[4];\n        var gfmCheckbox = matches[5].replace('[x]', '[ ]');\n        var textIndent = (previousMarker + delimiter + trailingSpace).length;\n        if (config == 'ordered') {\n            marker = String(Number(previousMarker) + 1);\n        }\n        // Add enough trailing spaces so that the text is aligned with the previous list item, but always keep at least one space\n        trailingSpace = \" \".repeat(Math.max(1, textIndent - (marker + delimiter).length));\n        var toBeAdded_1 = leadingSpace + marker + delimiter + trailingSpace + gfmCheckbox;\n        return editor.edit(function (editBuilder) {\n            editBuilder.insert(lineBreakPos, \"\\n\" + toBeAdded_1);\n        }, { undoStopBefore: true, undoStopAfter: false }).then(function () {\n            // Fix cursor position\n            if (modifiers == 'ctrl' && !cursorPos.isEqual(lineBreakPos)) {\n                var newCursorPos = cursorPos.with(line.lineNumber + 1, toBeAdded_1.length);\n                editor.selection = new extHostTypes_1.Selection(newCursorPos, newCursorPos);\n            }\n        }).then(function () { return fixMarker(editor); }).then(function () {\n            editor.revealRange(editor.selection);\n        });\n    }\n    else {\n        return asNormal(editor, 'enter', modifiers);\n    }\n}\nfunction onTabKey(editor, modifiers) {\n    var cursorPos = editor.selection.start;\n    var lineText = editor.document.lineAt(cursorPos.line).text;\n    if (util_1.isInFencedCodeBlock(editor.document, cursorPos.line)) {\n        return asNormal(editor, 'tab', modifiers);\n    }\n    var match = /^\\s*([-+*]|[0-9]+[.)]) +(\\[[ x]\\] +)?/.exec(lineText);\n    if (match\n        && (modifiers === 'shift'\n            || !editor.selection.isEmpty\n            || editor.selection.isEmpty && cursorPos.character <= match[0].length)) {\n        if (modifiers === 'shift') {\n            return outdent(editor).then(function () { return fixMarker(editor); });\n        }\n        else {\n            return indent(editor).then(function () { return fixMarker(editor); });\n        }\n    }\n    else {\n        return asNormal(editor, 'tab', modifiers);\n    }\n}\nfunction onBackspaceKey(editor) {\n    var cursor = editor.selection.active;\n    var document = editor.document;\n    var textBeforeCursor = document.lineAt(cursor.line).text.substr(0, cursor.character);\n    if (util_1.isInFencedCodeBlock(document, cursor.line)) {\n        return asNormal(editor, 'backspace');\n    }\n    if (!editor.selection.isEmpty) {\n        return asNormal(editor, 'backspace').then(function () { return fixMarker(editor, findNextMarkerLineNumber(editor)); });\n    }\n    else if (/^\\s+([-+*]|[0-9]+[.)]) $/.test(textBeforeCursor)) {\n        // e.g. textBeforeCursor === `  - `, `   1. `\n        return outdent(editor).then(function () { return fixMarker(editor); });\n    }\n    else if (/^([-+*]|[0-9]+[.)]) $/.test(textBeforeCursor)) {\n        // e.g. textBeforeCursor === `- `, `1. `\n        return editor.edit(function (editBuilder) {\n            editBuilder.replace(new extHostTypes_1.Range(cursor.with({ character: 0 }), cursor), ' '.repeat(textBeforeCursor.length));\n        }).then(function () { return fixMarker(editor, findNextMarkerLineNumber(editor)); });\n    }\n    else if (/^\\s*([-+*]|[0-9]+[.)]) +(\\[[ x]\\] )$/.test(textBeforeCursor)) {\n        // e.g. textBeforeCursor === `- [ ]`, `1. [x]`, `  - [x]`\n        return deleteRange(editor, new extHostTypes_1.Range(cursor.with({ character: textBeforeCursor.length - 4 }), cursor)).then(function () { return fixMarker(editor, findNextMarkerLineNumber(editor)); });\n    }\n    else {\n        return asNormal(editor, 'backspace');\n    }\n}\nfunction asNormal(editor, key, modifiers) {\n    switch (key) {\n        case 'enter':\n            if (modifiers === 'ctrl') {\n                return editor.executeCommand('editor.action.insertLineAfter');\n            }\n            else {\n                return editor.executeCommand('type', { source: 'keyboard', text: '\\n' });\n            }\n        case 'tab':\n            if (editor.getConfiguration('emmet').get('triggerExpansionOnTab')) {\n                return editor.executeCommand('editor.emmet.action.expandAbbreviation');\n            }\n            else if (modifiers === 'shift') {\n                return editor.executeCommand('editor.action.outdentLines');\n            }\n            else {\n                return editor.executeCommand('tab');\n            }\n        case 'backspace':\n            return editor.executeCommand('deleteLeft');\n    }\n}\n/**\n * If\n *\n * 1. it is not the first line\n * 2. there is a Markdown list item before this line\n *\n * then indent the current line to align with the previous list item.\n */\nfunction indent(editor) {\n    if (editor.getConfiguration(\"markdown.extension.list\").get(\"indentationSize\") === \"adaptive\") {\n        try {\n            var selection = editor.selection;\n            var indentationSize = tryDetermineIndentationSize(editor, selection.start.line, editor.document.lineAt(selection.start.line).firstNonWhitespaceCharacterIndex);\n            var edit = new extHostTypes_1.WorkspaceEdit();\n            for (var i = selection.start.line; i <= selection.end.line; i++) {\n                if (i === selection.end.line && !selection.isEmpty && selection.end.character === 0) {\n                    break;\n                }\n                if (editor.document.lineAt(i).text.length !== 0) {\n                    edit.insert(editor.document.uri, new extHostTypes_1.Position(i, 0), ' '.repeat(indentationSize));\n                }\n            }\n            return editor.applyEdit(edit);\n        }\n        catch (error) {\n        }\n    }\n    return editor.executeCommand('editor.action.indentLines');\n}\n/**\n * Similar to `indent`-function\n */\nfunction outdent(editor) {\n    if (editor.getConfiguration(\"markdown.extension.list\").get(\"indentationSize\") === \"adaptive\") {\n        try {\n            var selection = editor.selection;\n            var indentationSize = tryDetermineIndentationSize(editor, selection.start.line, editor.document.lineAt(selection.start.line).firstNonWhitespaceCharacterIndex);\n            var edit = new extHostTypes_1.WorkspaceEdit();\n            for (var i = selection.start.line; i <= selection.end.line; i++) {\n                if (i === selection.end.line && !selection.isEmpty && selection.end.character === 0) {\n                    break;\n                }\n                var lineText = editor.document.lineAt(i).text;\n                var maxOutdentSize = void 0;\n                if (lineText.trim().length === 0) {\n                    maxOutdentSize = lineText.length;\n                }\n                else {\n                    maxOutdentSize = editor.document.lineAt(i).firstNonWhitespaceCharacterIndex;\n                }\n                if (maxOutdentSize > 0) {\n                    edit.delete(editor.document.uri, new extHostTypes_1.Range(i, 0, i, Math.min(indentationSize, maxOutdentSize)));\n                }\n            }\n            return editor.applyEdit(edit);\n        }\n        catch (error) {\n        }\n    }\n    return editor.executeCommand('editor.action.outdentLines');\n}\nfunction tryDetermineIndentationSize(editor, line, currentIndentation) {\n    while (--line >= 0) {\n        var lineText = editor.document.lineAt(line).text;\n        var matches = void 0;\n        if ((matches = /^(\\s*)(([-+*]|[0-9]+[.)]) +)(\\[[ x]\\] +)?/.exec(lineText)) !== null) {\n            if (matches[1].length <= currentIndentation) {\n                return matches[2].length;\n            }\n        }\n    }\n    throw \"No previous Markdown list item\";\n}\n/**\n * Returns the line number of the next ordered list item starting either from\n * the specified line or the beginning of the current selection.\n */\nfunction findNextMarkerLineNumber(editor, line) {\n    if (line === undefined) {\n        // Use start.line instead of active.line so that we can find the first\n        // marker following either the cursor or the entire selected range\n        line = editor.selection.start.line;\n    }\n    while (line < editor.document.lineCount) {\n        var lineText = editor.document.lineAt(line).text;\n        if (/^\\s*[0-9]+[.)] +/.exec(lineText) !== null) {\n            return line;\n        }\n        line++;\n    }\n    return undefined;\n}\n/**\n * Looks for the previous ordered list marker at the same indentation level\n * and returns the marker number that should follow it.\n *\n * @returns the fixed marker number\n */\nfunction lookUpwardForMarker(editor, line, currentIndentation) {\n    while (--line >= 0) {\n        var lineText = editor.document.lineAt(line).text;\n        var matches = void 0;\n        if ((matches = /^(\\s*)(([0-9]+)[.)] +)/.exec(lineText)) !== null) {\n            var leadingSpace = matches[1];\n            var marker = matches[3];\n            if (leadingSpace.length === currentIndentation) {\n                return Number(marker) + 1;\n            }\n            else if ((!leadingSpace.includes('\\t') && leadingSpace.length + matches[2].length <= currentIndentation)\n                || leadingSpace.includes('\\t') && leadingSpace.length + 1 <= currentIndentation) {\n                return 1;\n            }\n        }\n        else if ((matches = /^(\\s*)\\S/.exec(lineText)) !== null) {\n            if (matches[1].length <= currentIndentation) {\n                break;\n            }\n        }\n    }\n    return 1;\n}\n/**\n * Fix ordered list marker *iteratively* starting from current line\n */\nfunction fixMarker(editor, line) {\n    // if (!workspace.getConfiguration('markdown.extension.orderedList').get<boolean>('autoRenumber')) return;\n    // if (workspace.getConfiguration('markdown.extension.orderedList').get<string>('marker') == 'one') return;\n    if (line === undefined) {\n        // Use either the first line containing an ordered list marker within the selection or the active line\n        line = findNextMarkerLineNumber(editor);\n        if (line === undefined || line > editor.selection.end.line) {\n            line = editor.selection.active.line;\n        }\n    }\n    if (line < 0 || editor.document.lineCount <= line) {\n        return;\n    }\n    var currentLineText = editor.document.lineAt(line).text;\n    var matches;\n    if ((matches = /^(\\s*)([0-9]+)([.)])( +)/.exec(currentLineText)) !== null) { // ordered list\n        var leadingSpace_1 = matches[1];\n        var marker_1 = matches[2];\n        var delimiter_1 = matches[3];\n        var trailingSpace = matches[4];\n        var fixedMarker = lookUpwardForMarker(editor, line, leadingSpace_1.length);\n        var listIndent_1 = marker_1.length + delimiter_1.length + trailingSpace.length;\n        var fixedMarkerString_1 = String(fixedMarker);\n        return editor.edit(function (editBuilder) {\n            if (marker_1 === fixedMarkerString_1) {\n                return;\n            }\n            // Add enough trailing spaces so that the text is still aligned at the same indentation level as it was previously, but always keep at least one space\n            fixedMarkerString_1 += delimiter_1 + \" \".repeat(Math.max(1, listIndent_1 - (fixedMarkerString_1 + delimiter_1).length));\n            editBuilder.replace(new extHostTypes_1.Range(line, leadingSpace_1.length, line, leadingSpace_1.length + listIndent_1), fixedMarkerString_1);\n        }, { undoStopBefore: false, undoStopAfter: false }).then(function () {\n            var nextLine = line + 1;\n            var indentString = \" \".repeat(listIndent_1);\n            while (editor.document.lineCount > nextLine) {\n                var nextLineText = editor.document.lineAt(nextLine).text;\n                if (/^\\s*[0-9]+[.)] +/.test(nextLineText)) {\n                    return fixMarker(editor, nextLine);\n                }\n                else if (/^\\s*$/.test(nextLineText)) {\n                    nextLine++;\n                }\n                else if (listIndent_1 <= 4 && !nextLineText.startsWith(indentString)) {\n                    return;\n                }\n                else {\n                    nextLine++;\n                }\n            }\n        });\n    }\n}\nexports.fixMarker = fixMarker;\nfunction deleteRange(editor, range) {\n    return editor.edit(function (editBuilder) {\n        editBuilder.delete(range);\n    }, \n    // We will enable undoStop after fixing markers\n    { undoStopBefore: true, undoStopAfter: false });\n}\n// function checkTaskList(editor: TextEditor) {\n//     let cursorPos = editor.selection.active;\n//     let line = editor.document.lineAt(cursorPos.line).text;\n//\n//     let matches: RegExpExecArray;\n//     if (matches = /^(\\s*([-+*]|[0-9]+[.)]) +\\[) \\]/.exec(line)) {\n//         return editor.edit((editBuilder:TextEditorEdit) => {\n//             editBuilder.replace(new Range(cursorPos.with({ character: matches[1].length }), cursorPos.with({ character: matches[1].length + 1 })), 'x');\n//         });\n//     } else if (matches = /^(\\s*([-+*]|[0-9]+[.)]) +\\[)x\\]/.exec(line)) {\n//         return editor.edit((editBuilder:TextEditorEdit) => {\n//             editBuilder.replace(new Range(cursorPos.with({ character: matches[1].length }), cursorPos.with({ character: matches[1].length + 1 })), ' ');\n//         });\n//     }\n// }\n// function onMoveLineUp() {\n//     return commands.executeCommand('editor.action.moveLinesUpAction')\n//         .then(() => fixMarker());\n// }\n//\n// function onMoveLineDown() {\n//     return commands.executeCommand('editor.action.moveLinesDownAction')\n//         .then(() => fixMarker(findNextMarkerLineNumber(window.activeTextEditor.selection.start.line - 1)));\n// }\n//\n// function onCopyLineUp() {\n//     return commands.executeCommand('editor.action.copyLinesUpAction')\n//         .then(() => fixMarker());\n// }\n//\n// function onCopyLineDown() {\n//     return commands.executeCommand('editor.action.copyLinesDownAction')\n//         .then(() => fixMarker());\n// }\n//\n// function onIndentLines() {\n//     return indent().then(() => fixMarker());\n// }\n//\n// function onOutdentLines() {\n//     return outdent().then(() => fixMarker());\n// }\nfunction deactivate() {\n}\nexports.deactivate = deactivate;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.slugify = exports.extractText = exports.isInFencedCodeBlock = void 0;\nvar extHostTypes_1 = __webpack_require__(1);\nfunction isInFencedCodeBlock(doc, lineNum) {\n    var textBefore = doc.getText(new extHostTypes_1.Range(new extHostTypes_1.Position(0, 0), new extHostTypes_1.Position(lineNum, 0)));\n    var matches = textBefore.match(/^```[\\w ]*$/gm);\n    if (matches == null) {\n        return false;\n    }\n    else {\n        return matches.length % 2 != 0;\n    }\n}\nexports.isInFencedCodeBlock = isInFencedCodeBlock;\n/* âââââââââââââââââââ\n   â Text Extraction â\n   âââââââââââââââââââ */\n/**\n * For example: [text](link) -> text\n * @param text\n */\nfunction extractText(text) {\n    return textInHtml(textInMd(text));\n}\nexports.extractText = extractText;\n// [text](link) -> text. In case there are links in heading (#83)\n// ð©\nfunction textInMd(text) {\n    return text.replace(/\\[([^\\]]+?)\\]\\([^\\)]+?\\)/g, function (_, g1) { return g1; });\n}\n// Convert HTML entities (#175)\n// Strip HTML tags (#179)\n// ð©\nfunction textInHtml(text) {\n    return text.replace(/(&emsp;)/g, function (_) { return 'â'; })\n        .replace(/(<!--[^>]*?-->)/g, '') // remove <!-- HTML comments -->\n        .replace(/<span[^>]*>(.*?)<\\/span>/g, function (_, g1) { return g1; }) // remove <span>\n        .replace(/ +/g, ' ');\n}\n/* âââââââââââ\n   â Slugify â\n   âââââââââââ */\n// Converted from `/[^\\p{Word}\\- ]/u`\n// `\\p{Word}` => ASCII plus Letter (Ll/Lm/Lo/Lt/Lu), Mark (Mc/Me/Mn), Number (Nd/Nl/No), Connector_Punctuation (Pc)\n// Using <https://apps.timwhitlock.info/js/regex>\nvar PUNCTUATION_REGEXP = /[^0-9A-Z_a-z\\- ÂªÂ²-Â³ÂµÂ¹-ÂºÂ¼-Â¾Ã-ÃÃ-Ã¶Ã¸-ËË-ËË -Ë¤Ë¬Ë®\\u0300-Í´Í¶-Í·Íº-Í½ÎÎ-ÎÎÎ-Î¡Î£-ÏµÏ·-Ò\\u0483-Ô£Ô±-ÕÕÕ¡-Ö\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7×-×ª×°-×²\\u0610-\\u061aØ¡-\\u065eÙ -Ù©Ù®-ÛÛ-\\u06dc\\u06de-\\u06e8\\u06ea-Û¼Û¿Ü-\\u074aÝ-Þ±ß-ßµßº\\u0901-à¤¹\\u093c-\\u094dà¥-\\u0954à¥-\\u0963à¥¦-à¥¯à¥±-à¥²à¥»-à¥¿\\u0981-\\u0983à¦-à¦à¦-à¦à¦-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹\\u09bc-\\u09c4\\u09c7-\\u09c8\\u09cb-à§\\u09d7à§-à§à§-\\u09e3à§¦-à§±à§´-à§¹\\u0a01-\\u0a03à¨-à¨à¨-à¨à¨-à¨¨à¨ª-à¨°à¨²-à¨³à¨µ-à¨¶à¨¸-à¨¹\\u0a3c\\u0a3e-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51à©-à©à©à©¦-\\u0a75\\u0a81-\\u0a83àª-àªàª-àªàª-àª¨àªª-àª°àª²-àª³àªµ-àª¹\\u0abc-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acdà«à« -\\u0ae3à«¦-à«¯\\u0b01-\\u0b03à¬-à¬à¬-à¬à¬-à¬¨à¬ª-à¬°à¬²-à¬³à¬µ-à¬¹\\u0b3c-\\u0b44\\u0b47-\\u0b48\\u0b4b-\\u0b4d\\u0b56-\\u0b57à­-à­à­-\\u0b63à­¦-à­¯à­±\\u0b82-à®à®-à®à®-à®à®-à®à®-à®à®à®-à®à®£-à®¤à®¨-à®ªà®®-à®¹\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcdà¯\\u0bd7à¯¦-à¯²\\u0c01-\\u0c03à°-à°à°-à°à°-à°¨à°ª-à°³à°µ-à°¹à°½-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56à±-à±à± -\\u0c63à±¦-à±¯à±¸-à±¾\\u0c82-\\u0c83à²-à²à²-à²à²-à²¨à²ª-à²³à²µ-à²¹\\u0cbc-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5-\\u0cd6à³à³ -\\u0ce3à³¦-à³¯\\u0d02-\\u0d03à´-à´à´-à´à´-à´¨à´ª-à´¹à´½-\\u0d44\\u0d46-\\u0d48\\u0d4a-\\u0d4d\\u0d57àµ -\\u0d63àµ¦-àµµàµº-àµ¿\\u0d82-\\u0d83à¶-à¶à¶-à¶±à¶³-à¶»à¶½à·-à·\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2-\\u0df3à¸-\\u0e3aà¹-\\u0e4eà¹-à¹àº-àºàºàº-àºàºàºàº-àºàº-àºàº¡-àº£àº¥àº§àºª-àº«àº­-\\u0eb9\\u0ebb-àº½à»-à»à»\\u0ec8-\\u0ecdà»-à»à»-à»à¼\\u0f18-\\u0f19à¼ -à¼³\\u0f35\\u0f37\\u0f39\\u0f3e-à½à½-à½¬\\u0f71-\\u0f84\\u0f86-à¾\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6á-áá-áá -áá-áºá¼á-áá-á¢á¨-á¹á-áá-áá-ááá-áá -áá-áá-á°á²-áµá¸-á¾áá-áá-áá-áá-áá-á\\u135fá©-á¼á-áá -á´á-á¬á¯-á¶á-áá -áª\\u16ee-\\u16f0á-áá-\\u1714á -\\u1734á-\\u1753á -á¬á®-á°\\u1772-\\u1773á-á³\\u17b6-\\u17d3áá-\\u17ddá -á©á°-á¹\\u180b-\\u180dá -á á  -á¡·á¢-á¢ªá¤-á¤\\u1920-\\u192b\\u1930-\\u193bá¥-á¥­á¥°-á¥´á¦-á¦©\\u19b0-\\u19c9á§-á§á¨-\\u1a1b\\u1b00-á­á­-á­\\u1b6b-\\u1b73\\u1b80-\\u1baaá®®-á®¹á°-\\u1c37á±-á±á±-á±½á´-\\u1de6\\u1dfe-á¼á¼-á¼á¼ -á½á½-á½á½-á½á½á½á½á½-á½½á¾-á¾´á¾¶-á¾¼á¾¾á¿-á¿á¿-á¿á¿-á¿á¿-á¿á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â¿-âââ°-â±â´-â¹â¿-ââ-â\\u20d0-\\u20f0âââ-âââ-ââ¤â¦â¨âª-â­â¯-â¹â¼-â¿â-âââ-\\u2188â -ââª-â¿â¶-ââ°-â°®â°°-â±â± -â±¯â±±-â±½â²-â³¤â³½â´-â´¥â´°-âµ¥âµ¯â¶-â¶â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·-â·â·-â·â·-â·â·-â·\\u2de0-\\u2dffâ¸¯ã-\\u3007\\u3021-\\u302fã±-ãµ\\u3038-ã¼ã-ã\\u3099-\\u309aã-ãã¡-ãºã¼-ã¿ã-ã­ã±-ãã-ãã -ã·ã°-ã¿ã -ã©ã-ãã-ãã±-ã¿ã-ä¶µä¸-é¿ê-êê-êê-ê«ê-êê¢-\\ua672\\ua67c-\\ua67dê¿-êê-êê¢-êê-êê»-\\ua827ê¡-ê¡³\\ua880-\\ua8c4ê£-ê£ê¤-\\ua92dê¤°-\\ua953ê¨-\\uaa36ê©-\\uaa4dê©-ê©ê°-í£ï¤-ï¨­ï¨°-ï©ªï©°-ï«ï¬-ï¬ï¬-ï¬ï¬-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­-ï­ï­-ï­ï­-ï®±ï¯-ï´½ïµ-ï¶ï¶-ï·ï·°-ï·»\\ufe00-\\ufe0f\\ufe20-\\ufe26ï¸³-ï¸´ï¹-ï¹ï¹°-ï¹´ï¹¶-ï»¼ï¼-ï¼ï¼¡-ï¼ºï¼¿ï½-ï½ï½¦-ï¾¾ï¿-ï¿ï¿-ï¿ï¿-ï¿ï¿-ï¿]/gu;\nfunction slugify(heading) {\n    // GitHub slugify function\n    // <https://github.com/jch/html-pipeline/blob/master/lib/html/pipeline/toc_filter.rb>\n    var slug = extractText(heading.trim())\n        // .replace(/[A-Z]/g, match => match.toLowerCase()) // only downcase ASCII region\n        .replace(PUNCTUATION_REGEXP, '')\n        .replace(/ /g, '-');\n    // if (doDowncase) {\n    slug = slug.replace(/[A-Z]/g, function (match) { return match.toLowerCase(); });\n    // }\n    return slug;\n}\nexports.slugify = slugify;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.all = exports.begin_args = exports._begin = exports._c3 = exports._c2 = exports._c1 = void 0;\n//copied from ../completion.ts\n//TODO: refactor?\nvar accents1 = [\n    'tilde', 'mathring',\n    'widetilde', 'overgroup',\n    'utilde', 'undergroup',\n    'acute', 'vec', 'Overrightarrow',\n    'bar', 'overleftarrow', 'overrightarrow',\n    'breve', 'underleftarrow', 'underrightarrow',\n    'check', 'overleftharpoon', 'overrightharpoon',\n    'dot', 'overleftrightarrow', 'overbrace',\n    'ddot', 'underleftrightarrow', 'underbrace',\n    'grave', 'overline', 'overlinesegment',\n    'hat', 'underline', 'underlinesegment',\n    'widehat', 'widecheck'\n];\nvar delimiters0 = [\n    'lparen', 'rparen', 'lceil', 'rceil', 'uparrow',\n    'lbrack', 'rbrack', 'lfloor', 'rfloor', 'downarrow', 'updownarrow',\n    'langle', 'rangle', 'lgroup', 'rgroup', 'Uparrow',\n    'vert', 'ulcorner', 'urcorner', 'Downarrow',\n    'Vert', 'llcorner', 'lrcorner', 'Updownarrow',\n    'lvert', 'rvert', 'lVert', 'rVert', 'backslash',\n    'lang', 'rang', 'lt', 'gt'\n];\nvar delimeterSizing0 = [\n    'left', 'big', 'bigl', 'bigm', 'bigr',\n    'middle', 'Big', 'Bigl', 'Bigm', 'Bigr',\n    'right', 'bigg', 'biggl', 'biggm', 'biggr',\n    'Bigg', 'Biggl', 'Biggm', 'Biggr'\n];\nvar greekLetters0 = [\n    'Alpha', 'Beta', 'Gamma', 'Delta',\n    'Epsilon', 'Zeta', 'Eta', 'Theta',\n    'Iota', 'Kappa', 'Lambda', 'Mu',\n    'Nu', 'Xi', 'Omicron', 'Pi',\n    'Sigma', 'Tau', 'Upsilon', 'Phi',\n    'Chi', 'Psi', 'Omega',\n    'varGamma', 'varDelta', 'varTheta', 'varLambda',\n    'varXi', 'varPi', 'varSigma', 'varUpsilon',\n    'varPhi', 'varPsi', 'varOmega',\n    'alpha', 'beta', 'gamma', 'delta',\n    'epsilon', 'zeta', 'eta', 'theta',\n    'iota', 'kappa', 'lambda', 'mu',\n    'nu', 'xi', 'omicron', 'pi',\n    'rho', 'sigma', 'tau', 'upsilon',\n    'phi', 'chi', 'psi', 'omega',\n    'varepsilon', 'varkappa', 'vartheta', 'thetasym',\n    'varpi', 'varrho', 'varsigma', 'varphi',\n    'digamma'\n];\nvar otherLetters0 = [\n    'imath', 'nabla', 'Im', 'Reals',\n    'jmath', 'partial', 'image', 'wp',\n    'aleph', 'Game', 'Bbbk', 'weierp',\n    'alef', 'Finv', 'N', 'Z',\n    'alefsym', 'cnums', 'natnums',\n    'beth', 'Complex', 'R',\n    'gimel', 'ell', 'Re',\n    'daleth', 'hbar', 'real',\n    'eth', 'hslash', 'reals'\n];\nvar annotation1 = [\n    'cancel', 'overbrace',\n    'bcancel', 'underbrace',\n    'xcancel', 'not =',\n    'sout', 'boxed',\n    'tag', 'tag*'\n];\nvar verticalLayout0 = ['atop'];\nvar verticalLayout2 = ['stackrel', 'overset', 'underset', 'raisebox'];\nvar overlap1 = ['mathllap', 'mathrlap', 'mathclap', 'llap', 'rlap', 'clap', 'smash'];\nvar spacing0 = [\n    'thinspace', 'medspace', 'thickspace', 'enspace',\n    'quad', 'qquad', 'negthinspace', 'negmedspace',\n    'nobreakspace', 'negthickspace'\n];\nvar spacing1 = [\n    'kern', 'mkern', 'mskip', 'hskip',\n    'hspace', 'hspace*', 'phantom', 'hphantom', 'vphantom'\n];\nvar logicAndSetTheory0 = [\n    'forall', 'complement', 'therefore', 'emptyset',\n    'exists', 'subset', 'because', 'empty',\n    'exist', 'supset', 'mapsto', 'varnothing',\n    'nexists', 'mid', 'to', 'implies',\n    'in', 'land', 'gets', 'impliedby',\n    'isin', 'lor', 'leftrightarrow', 'iff',\n    'notin', 'ni', 'notni', 'neg', 'lnot'\n];\nvar bigOperators0 = [\n    'sum', 'prod', 'bigotimes', 'bigvee',\n    'int', 'coprod', 'bigoplus', 'bigwedge',\n    'iint', 'intop', 'bigodot', 'bigcap',\n    'iiint', 'smallint', 'biguplus', 'bigcup',\n    'oint', 'oiint', 'oiiint', 'bigsqcup'\n];\nvar binaryOperators0 = [\n    'cdot', 'gtrdot', 'pmod',\n    'cdotp', 'intercal', 'pod',\n    'centerdot', 'land', 'rhd',\n    'circ', 'leftthreetimes', 'rightthreetimes',\n    'amalg', 'circledast', 'ldotp', 'rtimes',\n    'And', 'circledcirc', 'lor', 'setminus',\n    'ast', 'circleddash', 'lessdot', 'smallsetminus',\n    'barwedge', 'Cup', 'lhd', 'sqcap',\n    'bigcirc', 'cup', 'ltimes', 'sqcup',\n    'bmod', 'curlyvee', 'times',\n    'boxdot', 'curlywedge', 'mp', 'unlhd',\n    'boxminus', 'div', 'odot', 'unrhd',\n    'boxplus', 'divideontimes', 'ominus', 'uplus',\n    'boxtimes', 'dotplus', 'oplus', 'vee',\n    'bullet', 'doublebarwedge', 'otimes', 'veebar',\n    'Cap', 'doublecap', 'oslash', 'wedge',\n    'cap', 'doublecup', 'pm', 'plusmn', 'wr'\n];\nvar fractions0 = ['over', 'above'];\nvar fractions2 = ['frac', 'dfrac', 'tfrac', 'cfrac', 'genfrac'];\nvar binomialCoefficients0 = ['choose'];\nvar binomialCoefficients2 = ['binom', 'dbinom', 'tbinom', 'brace', 'brack'];\nvar mathOperators0 = [\n    'arcsin', 'cotg', 'ln', 'det',\n    'arccos', 'coth', 'log', 'gcd',\n    'arctan', 'csc', 'sec', 'inf',\n    'arctg', 'ctg', 'sin', 'lim',\n    'arcctg', 'cth', 'sinh', 'liminf',\n    'arg', 'deg', 'sh', 'limsup',\n    'ch', 'dim', 'tan', 'max',\n    'cos', 'exp', 'tanh', 'min',\n    'cosec', 'hom', 'tg', 'Pr',\n    'cosh', 'ker', 'th', 'sup',\n    'cot', 'lg', 'argmax',\n    'argmin', 'limits'\n];\nvar mathOperators1 = ['operatorname'];\nvar sqrt1 = ['sqrt'];\nvar relations0 = [\n    'eqcirc', 'lesseqgtr', 'sqsupset',\n    'eqcolon', 'lesseqqgtr', 'sqsupseteq',\n    'Eqcolon', 'lessgtr', 'Subset',\n    'eqqcolon', 'lesssim', 'subset',\n    'approx', 'Eqqcolon', 'll', 'subseteq', 'sube',\n    'approxeq', 'eqsim', 'lll', 'subseteqq',\n    'asymp', 'eqslantgtr', 'llless', 'succ',\n    'backepsilon', 'eqslantless', 'lt', 'succapprox',\n    'backsim', 'equiv', 'mid', 'succcurlyeq',\n    'backsimeq', 'fallingdotseq', 'models', 'succeq',\n    'between', 'frown', 'multimap', 'succsim',\n    'bowtie', 'ge', 'owns', 'Supset',\n    'bumpeq', 'geq', 'parallel', 'supset',\n    'Bumpeq', 'geqq', 'perp', 'supseteq',\n    'circeq', 'geqslant', 'pitchfork', 'supseteqq',\n    'colonapprox', 'gg', 'prec', 'thickapprox',\n    'Colonapprox', 'ggg', 'precapprox', 'thicksim',\n    'coloneq', 'gggtr', 'preccurlyeq', 'trianglelefteq',\n    'Coloneq', 'gt', 'preceq', 'triangleq',\n    'coloneqq', 'gtrapprox', 'precsim', 'trianglerighteq',\n    'Coloneqq', 'gtreqless', 'propto', 'varpropto',\n    'colonsim', 'gtreqqless', 'risingdotseq', 'vartriangle',\n    'Colonsim', 'gtrless', 'shortmid', 'vartriangleleft',\n    'cong', 'gtrsim', 'shortparallel', 'vartriangleright',\n    'curlyeqprec', 'in', 'sim', 'vcentcolon',\n    'curlyeqsucc', 'Join', 'simeq', 'vdash',\n    'dashv', 'le', 'smallfrown', 'vDash',\n    'dblcolon', 'leq', 'smallsmile', 'Vdash',\n    'doteq', 'leqq', 'smile', 'Vvdash',\n    'Doteq', 'leqslant', 'sqsubset',\n    'doteqdot', 'lessapprox', 'sqsubseteq'\n];\nvar negatedRelations0 = [\n    'gnapprox', 'ngeqslant', 'nsubseteq', 'precneqq',\n    'gneq', 'ngtr', 'nsubseteqq', 'precnsim',\n    'gneqq', 'nleq', 'nsucc', 'subsetneq',\n    'gnsim', 'nleqq', 'nsucceq', 'subsetneqq',\n    'gvertneqq', 'nleqslant', 'nsupseteq', 'succnapprox',\n    'lnapprox', 'nless', 'nsupseteqq', 'succneqq',\n    'lneq', 'nmid', 'ntriangleleft', 'succnsim',\n    'lneqq', 'notin', 'ntrianglelefteq', 'supsetneq',\n    'lnsim', 'notni', 'ntriangleright', 'supsetneqq',\n    'lvertneqq', 'nparallel', 'ntrianglerighteq', 'varsubsetneq',\n    'ncong', 'nprec', 'nvdash', 'varsubsetneqq',\n    'ne', 'npreceq', 'nvDash', 'varsupsetneq',\n    'neq', 'nshortmid', 'nVDash', 'varsupsetneqq',\n    'ngeq', 'nshortparallel', 'nVdash',\n    'ngeqq', 'nsim', 'precnapprox'\n];\nvar arrows0 = [\n    'circlearrowleft', 'leftharpoonup', 'rArr',\n    'circlearrowright', 'leftleftarrows', 'rarr',\n    'curvearrowleft', 'leftrightarrow', 'restriction',\n    'curvearrowright', 'Leftrightarrow', 'rightarrow',\n    'Darr', 'leftrightarrows', 'Rightarrow',\n    'dArr', 'leftrightharpoons', 'rightarrowtail',\n    'darr', 'leftrightsquigarrow', 'rightharpoondown',\n    'dashleftarrow', 'Lleftarrow', 'rightharpoonup',\n    'dashrightarrow', 'longleftarrow', 'rightleftarrows',\n    'downarrow', 'Longleftarrow', 'rightleftharpoons',\n    'Downarrow', 'longleftrightarrow', 'rightrightarrows',\n    'downdownarrows', 'Longleftrightarrow', 'rightsquigarrow',\n    'downharpoonleft', 'longmapsto', 'Rrightarrow',\n    'downharpoonright', 'longrightarrow', 'Rsh',\n    'gets', 'Longrightarrow', 'searrow',\n    'Harr', 'looparrowleft', 'swarrow',\n    'hArr', 'looparrowright', 'to',\n    'harr', 'Lrarr', 'twoheadleftarrow',\n    'hookleftarrow', 'lrArr', 'twoheadrightarrow',\n    'hookrightarrow', 'lrarr', 'Uarr',\n    'iff', 'Lsh', 'uArr',\n    'impliedby', 'mapsto', 'uarr',\n    'implies', 'nearrow', 'uparrow',\n    'Larr', 'nleftarrow', 'Uparrow',\n    'lArr', 'nLeftarrow', 'updownarrow',\n    'larr', 'nleftrightarrow', 'Updownarrow',\n    'leadsto', 'nLeftrightarrow', 'upharpoonleft',\n    'leftarrow', 'nrightarrow', 'upharpoonright',\n    'Leftarrow', 'nRightarrow', 'upuparrows',\n    'leftarrowtail', 'nwarrow', 'leftharpoondown', 'Rarr'\n];\nvar extensibleArrows1 = [\n    'xleftarrow', 'xrightarrow',\n    'xLeftarrow', 'xRightarrow',\n    'xleftrightarrow', 'xLeftrightarrow',\n    'xhookleftarrow', 'xhookrightarrow',\n    'xtwoheadleftarrow', 'xtwoheadrightarrow',\n    'xleftharpoonup', 'xrightharpoonup',\n    'xleftharpoondown', 'xrightharpoondown',\n    'xleftrightharpoons', 'xrightleftharpoons',\n    'xtofrom', 'xmapsto',\n    'xlongequal'\n];\nvar classAssignment1 = [\n    'mathbin', 'mathclose', 'mathinner', 'mathop',\n    'mathopen', 'mathord', 'mathpunct', 'mathrel'\n];\nvar color2 = ['color', 'textcolor', 'colorbox'];\nvar font0 = ['rm', 'bf', 'it', 'sf', 'tt'];\nvar font1 = [\n    'mathrm', 'mathbf', 'mathit',\n    'mathnormal', 'textbf', 'textit',\n    'textrm', 'bold', 'Bbb',\n    'textnormal', 'boldsymbol', 'mathbb',\n    'text', 'bm', 'frak',\n    'mathsf', 'mathtt', 'mathfrak',\n    'textsf', 'texttt', 'mathcal', 'mathscr'\n];\nvar size0 = [\n    'Huge', 'huge', 'LARGE', 'Large', 'large',\n    'normalsize', 'small', 'footnotesize', 'scriptsize', 'tiny'\n];\nvar style0 = [\n    'displaystyle', 'textstyle', 'scriptstyle', 'scriptscriptstyle',\n    'limits', 'nolimits', 'verb'\n];\nvar symbolsAndPunctuation0 = [\n    'cdots', 'LaTeX',\n    'ddots', 'TeX',\n    'ldots', 'nabla',\n    'vdots', 'infty',\n    'dotsb', 'infin',\n    'dotsc', 'checkmark',\n    'dotsi', 'dag',\n    'dotsm', 'dagger',\n    'dotso',\n    'sdot', 'ddag',\n    'mathellipsis', 'ddagger',\n    'Box', 'Dagger',\n    'lq', 'square', 'angle',\n    'blacksquare', 'measuredangle',\n    'rq', 'triangle', 'sphericalangle',\n    'triangledown', 'top',\n    'triangleleft', 'bot',\n    'triangleright',\n    'colon', 'bigtriangledown',\n    'backprime', 'bigtriangleup', 'pounds',\n    'prime', 'blacktriangle', 'mathsterling',\n    'blacktriangledown',\n    'blacktriangleleft', 'yen',\n    'blacktriangleright', 'surd',\n    'diamond', 'degree',\n    'Diamond',\n    'lozenge', 'mho',\n    'blacklozenge', 'diagdown',\n    'star', 'diagup',\n    'bigstar', 'flat',\n    'clubsuit', 'natural',\n    'copyright', 'clubs', 'sharp',\n    'circledR', 'diamondsuit', 'heartsuit',\n    'diamonds', 'hearts',\n    'circledS', 'spadesuit', 'spades',\n    'maltese'\n];\nexports._c1 = Array.from(new Set(__spreadArrays(delimiters0, delimeterSizing0, greekLetters0, otherLetters0, spacing0, verticalLayout0, logicAndSetTheory0, bigOperators0, binaryOperators0, binomialCoefficients0, fractions0, mathOperators0, relations0, negatedRelations0, arrows0, font0, size0, style0, symbolsAndPunctuation0)));\nexports._c2 = Array.from(new Set(__spreadArrays(accents1, annotation1, overlap1, spacing1, mathOperators1, sqrt1, extensibleArrows1, font1, classAssignment1)));\nexports._c3 = Array.from(new Set(__spreadArrays(verticalLayout2, binomialCoefficients2, fractions2, color2)));\nexports._begin = ['begin', 'end'];\nexports.begin_args = ['aligned', 'alignedat', 'array', 'bmatrix', 'Bmatrix', 'cases',\n    'darray', 'dcases', 'gathered', 'matrix', 'pmatrix', 'vmatrix', 'Vmatrix'];\nexports.all = __spreadArrays(exports._c1, exports._c2, exports._c3, exports._begin).map(function (i) { return '\\\\' + i; });\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonacoMarkdownExtension = void 0;\nvar formatting_1 = __webpack_require__(4);\nvar vscode_monaco_1 = __webpack_require__(2);\nvar listEditing_1 = __webpack_require__(5);\nvar completion_1 = __webpack_require__(12);\nvar tableFormatter_1 = __webpack_require__(14);\nvar markdown_contribution_1 = __webpack_require__(15);\nvar MonacoMarkdownExtension = /** @class */ (function () {\n    function MonacoMarkdownExtension() {\n    }\n    MonacoMarkdownExtension.prototype.activate = function (editor) {\n        var textEditor = new vscode_monaco_1.TextEditor(editor);\n        formatting_1.activateFormatting(textEditor);\n        listEditing_1.activateListEditing(textEditor);\n        completion_1.activateCompletion(textEditor);\n        tableFormatter_1.activateTableFormatter(textEditor);\n        // Allow `*` in word pattern for quick styling\n        vscode_monaco_1.setWordDefinitionFor(textEditor.languageId, /(-?\\d*\\.\\d\\w*)|([^\\!\\@\\#\\%\\^\\&\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s\\ï¼\\ã\\ã\\ã\\ï¼\\ï¼\\ï¼\\â\\â\\â\\â\\ï¼\\ï¼\\ã\\ã\\ã]+)/g);\n    };\n    return MonacoMarkdownExtension;\n}());\nexports.MonacoMarkdownExtension = MonacoMarkdownExtension;\nmarkdown_contribution_1.activateMarkdownMath();\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getErrorMessage = exports.disposed = exports.readonly = exports.illegalState = exports.illegalArgument = exports.canceled = exports.isPromiseCanceledError = exports.transformErrorForSerialization = exports.onUnexpectedExternalError = exports.onUnexpectedError = exports.setUnexpectedErrorHandler = exports.errorHandler = exports.ErrorHandler = void 0;\n// Avoid circular dependency on EventEmitter by implementing a subset of the interface.\nvar ErrorHandler = /** @class */ (function () {\n    function ErrorHandler() {\n        this.listeners = [];\n        this.unexpectedErrorHandler = function (e) {\n            setTimeout(function () {\n                if (e.stack) {\n                    throw new Error(e.message + '\\n\\n' + e.stack);\n                }\n                throw e;\n            }, 0);\n        };\n    }\n    ErrorHandler.prototype.addListener = function (listener) {\n        var _this = this;\n        this.listeners.push(listener);\n        return function () {\n            _this._removeListener(listener);\n        };\n    };\n    ErrorHandler.prototype.emit = function (e) {\n        this.listeners.forEach(function (listener) {\n            listener(e);\n        });\n    };\n    ErrorHandler.prototype._removeListener = function (listener) {\n        this.listeners.splice(this.listeners.indexOf(listener), 1);\n    };\n    ErrorHandler.prototype.setUnexpectedErrorHandler = function (newUnexpectedErrorHandler) {\n        this.unexpectedErrorHandler = newUnexpectedErrorHandler;\n    };\n    ErrorHandler.prototype.getUnexpectedErrorHandler = function () {\n        return this.unexpectedErrorHandler;\n    };\n    ErrorHandler.prototype.onUnexpectedError = function (e) {\n        this.unexpectedErrorHandler(e);\n        this.emit(e);\n    };\n    // For external errors, we don't want the listeners to be called\n    ErrorHandler.prototype.onUnexpectedExternalError = function (e) {\n        this.unexpectedErrorHandler(e);\n    };\n    return ErrorHandler;\n}());\nexports.ErrorHandler = ErrorHandler;\nexports.errorHandler = new ErrorHandler();\nfunction setUnexpectedErrorHandler(newUnexpectedErrorHandler) {\n    exports.errorHandler.setUnexpectedErrorHandler(newUnexpectedErrorHandler);\n}\nexports.setUnexpectedErrorHandler = setUnexpectedErrorHandler;\nfunction onUnexpectedError(e) {\n    // ignore errors from cancelled promises\n    if (!isPromiseCanceledError(e)) {\n        exports.errorHandler.onUnexpectedError(e);\n    }\n    return undefined;\n}\nexports.onUnexpectedError = onUnexpectedError;\nfunction onUnexpectedExternalError(e) {\n    // ignore errors from cancelled promises\n    if (!isPromiseCanceledError(e)) {\n        exports.errorHandler.onUnexpectedExternalError(e);\n    }\n    return undefined;\n}\nexports.onUnexpectedExternalError = onUnexpectedExternalError;\nfunction transformErrorForSerialization(error) {\n    if (error instanceof Error) {\n        var name_1 = error.name, message = error.message;\n        var stack = error.stacktrace || error.stack;\n        return {\n            $isError: true,\n            name: name_1,\n            message: message,\n            stack: stack\n        };\n    }\n    // return as is\n    return error;\n}\nexports.transformErrorForSerialization = transformErrorForSerialization;\nvar canceledName = 'Canceled';\n/**\n * Checks if the given error is a promise in canceled state\n */\nfunction isPromiseCanceledError(error) {\n    return error instanceof Error && error.name === canceledName && error.message === canceledName;\n}\nexports.isPromiseCanceledError = isPromiseCanceledError;\n/**\n * Returns an error that signals cancellation.\n */\nfunction canceled() {\n    var error = new Error(canceledName);\n    error.name = error.message;\n    return error;\n}\nexports.canceled = canceled;\nfunction illegalArgument(name) {\n    if (name) {\n        return new Error(\"Illegal argument: \" + name);\n    }\n    else {\n        return new Error('Illegal argument');\n    }\n}\nexports.illegalArgument = illegalArgument;\nfunction illegalState(name) {\n    if (name) {\n        return new Error(\"Illegal state: \" + name);\n    }\n    else {\n        return new Error('Illegal state');\n    }\n}\nexports.illegalState = illegalState;\nfunction readonly(name) {\n    return name\n        ? new Error(\"readonly property '\" + name + \" cannot be changed'\")\n        : new Error('readonly property cannot be changed');\n}\nexports.readonly = readonly;\nfunction disposed(what) {\n    var result = new Error(what + \" has been disposed\");\n    result.name = 'DISPOSED';\n    return result;\n}\nexports.disposed = disposed;\nfunction getErrorMessage(err) {\n    if (!err) {\n        return 'Error';\n    }\n    if (err.message) {\n        return err.message;\n    }\n    if (err.stack) {\n        return err.stack.split('\\n')[0];\n    }\n    return String(err);\n}\nexports.getErrorMessage = getErrorMessage;\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regExpLeadsToEndlessLoop = void 0;\nfunction regExpLeadsToEndlessLoop(regexp) {\n    // Exit early if it's one of these special cases which are meant to match\n    // against an empty string\n    if (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n        return false;\n    }\n    // We check against an empty string. If the regular expression doesn't advance\n    // (e.g. ends in an endless loop) it will match an empty string.\n    var match = regexp.exec('');\n    return !!(match && regexp.lastIndex === 0);\n}\nexports.regExpLeadsToEndlessLoop = regExpLeadsToEndlessLoop;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getWordAtText = exports.ensureValidWordDefinition = exports.DEFAULT_WORD_REGEXP = exports.USUAL_WORD_SEPARATORS = void 0;\nexports.USUAL_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?';\n/**\n * Create a word definition regular expression based on default word separators.\n * Optionally provide allowed separators that should be included in words.\n *\n * The default would look like this:\n * /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g\n */\nfunction createWordRegExp(allowInWords) {\n    if (allowInWords === void 0) { allowInWords = ''; }\n    var source = '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^';\n    for (var _i = 0, USUAL_WORD_SEPARATORS_1 = exports.USUAL_WORD_SEPARATORS; _i < USUAL_WORD_SEPARATORS_1.length; _i++) {\n        var sep = USUAL_WORD_SEPARATORS_1[_i];\n        if (allowInWords.indexOf(sep) >= 0) {\n            continue;\n        }\n        source += '\\\\' + sep;\n    }\n    source += '\\\\s]+)';\n    return new RegExp(source, 'g');\n}\n// catches numbers (including floating numbers) in the first group, and alphanum in the second\nexports.DEFAULT_WORD_REGEXP = createWordRegExp();\nfunction ensureValidWordDefinition(wordDefinition) {\n    var result = exports.DEFAULT_WORD_REGEXP;\n    if (wordDefinition && (wordDefinition instanceof RegExp)) {\n        if (!wordDefinition.global) {\n            var flags = 'g';\n            if (wordDefinition.ignoreCase) {\n                flags += 'i';\n            }\n            if (wordDefinition.multiline) {\n                flags += 'm';\n            }\n            if (wordDefinition.unicode) {\n                flags += 'u';\n            }\n            result = new RegExp(wordDefinition.source, flags);\n        }\n        else {\n            result = wordDefinition;\n        }\n    }\n    result.lastIndex = 0;\n    return result;\n}\nexports.ensureValidWordDefinition = ensureValidWordDefinition;\nfunction getWordAtPosFast(column, wordDefinition, text, textOffset) {\n    // find whitespace enclosed text around column and match from there\n    var pos = column - 1 - textOffset;\n    var start = text.lastIndexOf(' ', pos - 1) + 1;\n    wordDefinition.lastIndex = start;\n    var match;\n    while (match = wordDefinition.exec(text)) {\n        var matchIndex = match.index || 0;\n        if (matchIndex <= pos && wordDefinition.lastIndex >= pos) {\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + matchIndex,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n    return null;\n}\nfunction getWordAtPosSlow(column, wordDefinition, text, textOffset) {\n    // matches all words starting at the beginning\n    // of the input until it finds a match that encloses\n    // the desired column. slow but correct\n    var pos = column - 1 - textOffset;\n    wordDefinition.lastIndex = 0;\n    var match;\n    while (match = wordDefinition.exec(text)) {\n        var matchIndex = match.index || 0;\n        if (matchIndex > pos) {\n            // |nW -> matched only after the pos\n            return null;\n        }\n        else if (wordDefinition.lastIndex >= pos) {\n            // W|W -> match encloses pos\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + matchIndex,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n    return null;\n}\nfunction getWordAtText(column, wordDefinition, text, textOffset) {\n    // if `words` can contain whitespace character we have to use the slow variant\n    // otherwise we use the fast variant of finding a word\n    wordDefinition.lastIndex = 0;\n    var match = wordDefinition.exec(text);\n    if (!match) {\n        return null;\n    }\n    // todo@joh the `match` could already be the (first) word\n    var ret = match[0].indexOf(' ') >= 0\n        // did match a word which contains a space character -> use slow word find\n        ? getWordAtPosSlow(column, wordDefinition, text, textOffset)\n        // sane word definition -> use fast word find\n        : getWordAtPosFast(column, wordDefinition, text, textOffset);\n    // both (getWordAtPosFast and getWordAtPosSlow) leave the wordDefinition-RegExp\n    // in an undefined state and to not confuse other users of the wordDefinition\n    // we reset the lastIndex\n    wordDefinition.lastIndex = 0;\n    return ret;\n}\nexports.getWordAtText = getWordAtText;\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.activateCompletion = void 0;\nvar TypeConverters = __webpack_require__(3);\nvar monaco_editor_1 = __webpack_require__(0);\nvar vscode_monaco_1 = __webpack_require__(2);\nvar extHostTypes_1 = __webpack_require__(1);\nvar util_1 = __webpack_require__(6);\nvar toc_1 = __webpack_require__(13);\nvar latex = __webpack_require__(7);\nvar completionActivated = false;\nfunction activateCompletion(editor) {\n    if (!completionActivated) {\n        //TODO: remove provider when context is disposed\n        var provider = new MdCompletionItemProvider();\n        monaco_editor_1.languages.registerCompletionItemProvider(editor.languageId, provider);\n        completionActivated = true;\n    }\n}\nexports.activateCompletion = activateCompletion;\nfunction completionList(items) {\n    return { suggestions: items.map(function (v, _) { return Object.assign({}, v); }) };\n}\nfunction newCompletionItem(text, kind) {\n    return {\n        label: text,\n        kind: kind,\n        additionalTextEdits: undefined,\n        command: undefined,\n        commitCharacters: undefined,\n        detail: undefined,\n        documentation: undefined,\n        filterText: undefined,\n        insertTextRules: undefined,\n        preselect: false,\n        range: undefined,\n        sortText: undefined,\n        insertText: undefined\n    };\n}\nvar MdCompletionItemProvider = /** @class */ (function () {\n    function MdCompletionItemProvider() {\n        this.triggerCharacters = ['(', '\\\\', '/', '[', '#'];\n        // \\cmd\n        var c1 = latex._c1.map(function (cmd) {\n            var item = newCompletionItem('\\\\' + cmd, monaco_editor_1.languages.CompletionItemKind.Function);\n            item.insertText = cmd;\n            return item;\n        });\n        // \\cmd{$1}\n        var c2 = latex._c2.map(function (cmd) {\n            var item = newCompletionItem('\\\\' + cmd, monaco_editor_1.languages.CompletionItemKind.Function);\n            item.insertText = new extHostTypes_1.SnippetString(cmd + \"{$1}\").value;\n            item.insertTextRules = monaco_editor_1.languages.CompletionItemInsertTextRule.InsertAsSnippet;\n            return item;\n        });\n        // \\cmd{$1}{$2}\n        var c3 = latex._c3.map(function (cmd) {\n            var item = newCompletionItem('\\\\' + cmd, monaco_editor_1.languages.CompletionItemKind.Function);\n            item.insertText = new extHostTypes_1.SnippetString(cmd + \"{$1}{$2}\").value;\n            item.insertTextRules = monaco_editor_1.languages.CompletionItemInsertTextRule.InsertAsSnippet;\n            return item;\n        });\n        var envSnippet = newCompletionItem('\\\\begin', monaco_editor_1.languages.CompletionItemKind.Snippet);\n        envSnippet.insertText = new extHostTypes_1.SnippetString('begin{${1|aligned,alignedat,array,bmatrix,Bmatrix,cases,darray,dcases,gathered,matrix,pmatrix,vmatrix,Vmatrix|}}\\n\\t$2\\n\\\\end{$1}').value;\n        envSnippet.insertTextRules = monaco_editor_1.languages.CompletionItemInsertTextRule.InsertAsSnippet;\n        this.mathCompletions = __spreadArrays(c1, c2, c3, [envSnippet]);\n        // Sort\n        this.mathCompletions.forEach(function (item) {\n            item.sortText = (typeof item.label === 'string' ? item.label : item.label.label).replace(/[a-zA-Z]/g, function (c) {\n                if (/[a-z]/.test(c)) {\n                    return \"0\" + c;\n                }\n                else {\n                    return \"1\" + c.toLowerCase();\n                }\n            });\n        });\n    }\n    MdCompletionItemProvider.prototype.provideCompletionItems = function (model, _position, _context, _token) {\n        var document = new vscode_monaco_1.TextDocument(model);\n        var position = TypeConverters.Position.to(_position);\n        var lineTextBefore = document.lineAt(position.line).text.substring(0, position.character);\n        var lineTextAfter = document.lineAt(position.line).text.substring(position.character);\n        var matches;\n        if ((matches = lineTextBefore.match(/\\\\[^$]*$/)) !== null) {\n            /* ââââââââââââââââââ\n               â Math functions â\n               ââââââââââââââââââ */\n            if (/(^|[^\\$])\\$(|[^ \\$].*)\\\\\\w*$/.test(lineTextBefore)\n                && lineTextAfter.includes('$')) {\n                // Complete math functions (inline math)\n                return completionList(this.mathCompletions);\n            }\n            else {\n                var textBefore = document.getText(new extHostTypes_1.Range(new extHostTypes_1.Position(0, 0), position));\n                var textAfter = document.getText().substr(document.offsetAt(position));\n                if ((matches = textBefore.match(/\\$\\$/g)) !== null\n                    && matches.length % 2 !== 0\n                    && textAfter.includes('\\$\\$')) {\n                    // Complete math functions ($$ ... $$)\n                    return completionList(this.mathCompletions);\n                }\n                else {\n                    return completionList([]);\n                }\n            }\n        }\n        else if (/\\[[^\\]]*?\\]\\[[^\\]]*$/.test(lineTextBefore)) {\n            /* âââââââââââââââââââââââââ\n               â Reference link labels â\n               âââââââââââââââââââââââââ */\n            var startIndex = lineTextBefore.lastIndexOf('[');\n            var range_1 = new extHostTypes_1.Range(position.with({ character: startIndex + 1 }), position);\n            return new Promise(function (res, _) {\n                var lines = document.getText().split(/\\r?\\n/);\n                var usageCounts = lines.reduce(function (useCounts, currentLine) {\n                    var match;\n                    var pattern = /\\[[^\\]]+\\]\\[([^\\]]*?)\\]/g;\n                    while ((match = pattern.exec(currentLine)) !== null) {\n                        var usedRef = match[1];\n                        if (!useCounts.has(usedRef)) {\n                            useCounts.set(usedRef, 0);\n                        }\n                        useCounts.set(usedRef, useCounts.get(usedRef) + 1);\n                    }\n                    return useCounts;\n                }, new Map());\n                var refLabels = lines.reduce(function (prev, curr) {\n                    var match;\n                    if ((match = /^\\[([^\\]]*?)\\]: (\\S*)( .*)?/.exec(curr)) !== null) {\n                        var ref = match[1];\n                        var item = newCompletionItem(ref, monaco_editor_1.languages.CompletionItemKind.Reference);\n                        var usages = usageCounts.get(ref) || 0;\n                        item.insertText = ref;\n                        item.documentation = { value: (match[2]) };\n                        item.detail = usages === 1 ? \"1 usage\" : usages + \" usages\";\n                        // Prefer unused items\n                        item.sortText = usages === 0 ? \"0-\" + ref : item.sortText = \"1-\" + ref;\n                        item.range = TypeConverters.Range.from(range_1);\n                        prev.push(item);\n                    }\n                    return prev;\n                }, []);\n                res(completionList(refLabels));\n            });\n        }\n        else if (/\\[[^\\]]*\\]\\(#[^\\)]*$/.test(lineTextBefore)) {\n            /* âââââââââââââââââââââââââââââ\n               â Anchor tags from headings â\n               âââââââââââââââââââââââââââââ */\n            var startIndex = lineTextBefore.lastIndexOf('(');\n            var endPosition = position;\n            var addClosingParen_1 = false;\n            if (/^([^\\) ]+\\s*|^\\s*)\\)/.test(lineTextAfter)) {\n                // try to detect if user wants to replace a link (i.e. matching closing paren and )\n                // Either: ... <CURSOR> something <whitespace> )\n                //     or: ... <CURSOR> <whitespace> )\n                //     or: ... <CURSOR> )     (endPosition assignment is a no-op for this case)\n                // in every case, we want to remove all characters after the cursor and before that first closing paren\n                endPosition = position.with({ character: +endPosition.character + lineTextAfter.indexOf(')') });\n            }\n            else {\n                // If no closing paren is found, replace all trailing non-white-space chars and add a closing paren\n                // distance to first non-whitespace or EOL\n                var toReplace = 0;\n                while (toReplace < lineTextAfter.length && ' \\t\\n\\r\\v'.indexOf(lineTextAfter.charAt(toReplace)) != -1) {\n                    toReplace++;\n                }\n                endPosition = position.with({ character: +endPosition.character + toReplace });\n                addClosingParen_1 = true;\n            }\n            var range_2 = new extHostTypes_1.Range(position.with({ character: startIndex + 1 }), endPosition);\n            return new Promise(function (res, _) {\n                var toc = toc_1.buildToc(document);\n                var headingCompletions = toc.reduce(function (prev, curr) {\n                    var item = newCompletionItem('#' + util_1.slugify(curr.text), monaco_editor_1.languages.CompletionItemKind.Reference);\n                    var label = typeof item.label === 'string' ? item.label : item.label.label;\n                    if (addClosingParen_1) {\n                        item.insertText = label + ')';\n                    }\n                    else {\n                        item.insertText = label;\n                    }\n                    item.documentation = curr.text;\n                    item.range = TypeConverters.Range.from(range_2);\n                    prev.push(item);\n                    return prev;\n                }, []);\n                res(completionList(headingCompletions));\n            });\n        }\n        else {\n            return completionList([]);\n        }\n    };\n    return MdCompletionItemProvider;\n}());\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildToc = void 0;\nfunction buildToc(doc) {\n    var toc;\n    var lines = doc.getText()\n        .replace(/^```[\\W\\w]+?^```/gm, '') // Remove code blocks\n        .replace(/<!-- omit in (toc|TOC) -->/g, '&lt; omit in toc &gt;') // Escape magic comment\n        .replace(/<!--[\\W\\w]+?-->/, '') // Remove comments\n        .replace(/^---[\\W\\w]+?(\\r?\\n)---/, '') // Remove YAML front matter\n        .split(/\\r?\\n/g);\n    // Transform setext headings to ATX headings\n    lines.forEach(function (lineText, i, arr) {\n        if (i < arr.length - 1\n            && lineText.match(/^ {0,3}\\S.*$/)\n            && arr[i + 1].match(/^ {0,3}(=+|-{2,}) *$/)) {\n            arr[i] = (arr[i + 1].includes('=') ? '# ' : '## ') + lineText;\n        }\n    });\n    toc = lines.filter(function (lineText) {\n        return lineText.startsWith('#')\n            && lineText.includes('# ')\n            && !lineText.includes('&lt; omit in toc &gt;');\n    }).map(function (lineText) {\n        var matches = /^(#+) (.*)/.exec(lineText);\n        return { level: matches[1].length, text: matches[2].replace(/#+$/, '').trim() };\n    });\n    return toc;\n}\nexports.buildToc = buildToc;\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.deactivate = exports.activateTableFormatter = void 0;\n// https://github.github.com/gfm/#tables-extension-\nvar monaco_editor_1 = __webpack_require__(0);\nvar vscode_monaco_1 = __webpack_require__(2);\nvar extHostTypes_1 = __webpack_require__(1);\nvar TypeConverters = __webpack_require__(3);\nfunction activateTableFormatter(editor) {\n    monaco_editor_1.languages.registerDocumentFormattingEditProvider(editor.languageId, new MarkdownDocumentFormatter());\n}\nexports.activateTableFormatter = activateTableFormatter;\nfunction deactivate() {\n}\nexports.deactivate = deactivate;\nvar MarkdownDocumentFormatter = /** @class */ (function () {\n    function MarkdownDocumentFormatter() {\n    }\n    MarkdownDocumentFormatter.prototype.provideDocumentFormattingEdits = function (model, options, _) {\n        var _this = this;\n        var edits = [];\n        var document = new vscode_monaco_1.TextDocument(model);\n        var tables = this.detectTables(document.getText());\n        if (tables !== null) {\n            tables.forEach(function (table) {\n                edits.push({ range: TypeConverters.Range.from(_this.getRange(document, table)), text: _this.formatTable(table, document, options) });\n            });\n            return edits;\n        }\n        else {\n            return [];\n        }\n    };\n    MarkdownDocumentFormatter.prototype.detectTables = function (text) {\n        var lineBreak = '\\\\r?\\\\n';\n        var contentLine = '\\\\|?.*\\\\|.*\\\\|?';\n        var hyphenLine = '[ \\\\t]*\\\\|?( *:?-+:? *\\\\|)+( *:?-+:? *\\\\|?)[ \\\\t]*';\n        var tableRegex = new RegExp(contentLine + lineBreak + hyphenLine + '(?:' + lineBreak + contentLine + ')*', 'g');\n        return text.match(tableRegex);\n    };\n    MarkdownDocumentFormatter.prototype.getRange = function (document, text) {\n        var documentText = document.getText();\n        var start = document.positionAt(documentText.indexOf(text));\n        var end = document.positionAt(documentText.indexOf(text) + text.length);\n        return new extHostTypes_1.Range(start, end);\n    };\n    /**\n     * Return the indentation of a table as a string of spaces by reading it from the first line.\n     * In case of `markdown.extension.table.normalizeIndentation` is `enabled` it is rounded to the closest multiple of\n     * the configured `tabSize`.\n     */\n    MarkdownDocumentFormatter.prototype.getTableIndentation = function (text, options) {\n        // let doNormalize = workspace.getConfiguration('markdown.extension.tableFormatter').get<boolean>('normalizeIndentation');\n        var doNormalize = true;\n        var indentRegex = new RegExp(/^(\\s*)\\S/u);\n        var match = text.match(indentRegex);\n        var spacesInFirstLine = match[1].length;\n        var tabStops = Math.round(spacesInFirstLine / options.tabSize);\n        var spaces = doNormalize ? \" \".repeat(options.tabSize * tabStops) : \" \".repeat(spacesInFirstLine);\n        return spaces;\n    };\n    MarkdownDocumentFormatter.prototype.formatTable = function (text, doc, options) {\n        var _this = this;\n        var indentation = this.getTableIndentation(text, options);\n        var rows = [];\n        var rowsNoIndentPattern = new RegExp(/^\\s*(\\S.*)$/gum);\n        var match = null;\n        while ((match = rowsNoIndentPattern.exec(text)) !== null) {\n            rows.push(match[1].trim());\n        }\n        // Desired width of each column\n        var colWidth = [];\n        // Alignment of each column        \n        var colAlign = [];\n        // Regex to extract cell content.\n        // Known issue: `\\\\|` is not correctly parsed as a valid delimiter\n        var fieldRegExp = new RegExp(/(?:((?:\\\\\\||`.*?`|[^\\|])*)\\|)/gu);\n        var cjkRegex = /[\\u3000-\\u9fff\\uff01-\\uff60]/g;\n        var lines = rows.map(function (row, num) {\n            // Normalize\n            if (row.startsWith('|')) {\n                row = row.slice(1);\n            }\n            if (!row.endsWith('|')) {\n                row = row + '|';\n            }\n            var field = null;\n            var values = [];\n            var i = 0;\n            while ((field = fieldRegExp.exec(row)) !== null) {\n                var cell = field[1].trim();\n                values.push(cell);\n                // Ignore length of dash-line to enable width reduction\n                if (num != 1) {\n                    // Treat CJK characters as 2 English ones because of Unicode stuff\n                    var length_1 = cjkRegex.test(cell) ? cell.length + cell.match(cjkRegex).length : cell.length;\n                    colWidth[i] = colWidth[i] > length_1 ? colWidth[i] : length_1;\n                }\n                i++;\n            }\n            return values;\n        });\n        // Normalize the num of hyphen, use Math.max to determine minimum length based on dash-line format\n        lines[1] = lines[1].map(function (cell, i) {\n            if (/:-+:/.test(cell)) {\n                //:---:\n                colWidth[i] = Math.max(colWidth[i], 5);\n                colAlign[i] = 'c';\n                return ':' + '-'.repeat(colWidth[i] - 2) + ':';\n            }\n            else if (/:-+/.test(cell)) {\n                //:---\n                colWidth[i] = Math.max(colWidth[i], 4);\n                colAlign[i] = 'l';\n                return ':' + '-'.repeat(colWidth[i] - 1);\n            }\n            else if (/-+:/.test(cell)) {\n                //---:\n                colWidth[i] = Math.max(colWidth[i], 4);\n                colAlign[i] = 'r';\n                return '-'.repeat(colWidth[i] - 1) + ':';\n            }\n            else if (/-+/.test(cell)) {\n                //---\n                colWidth[i] = Math.max(colWidth[i], 3);\n                colAlign[i] = 'l';\n                return '-'.repeat(colWidth[i]);\n            }\n            else {\n                colAlign[i] = 'l';\n            }\n        });\n        return lines.map(function (row) {\n            var cells = row.map(function (cell, i) {\n                var cellLength = colWidth[i];\n                if (cjkRegex.test(cell)) {\n                    cellLength -= cell.match(cjkRegex).length;\n                }\n                //return (cell + ' '.repeat(cellLength)).slice(0, cellLength);\n                return _this.alignText(cell, colAlign[i], cellLength);\n            });\n            return indentation + '| ' + cells.join(' | ') + ' |';\n        }).join(doc.eol === extHostTypes_1.EndOfLine.LF ? '\\n' : '\\r\\n');\n    };\n    MarkdownDocumentFormatter.prototype.alignText = function (text, align, length) {\n        if (align === 'c' && length > text.length) {\n            return (' '.repeat(Math.floor((length - text.length) / 2)) + text + ' '.repeat(length)).slice(0, length);\n        }\n        else if (align === 'r') {\n            return (' '.repeat(length) + text).slice(-length);\n        }\n        else {\n            return (text + ' '.repeat(length)).slice(0, length);\n        }\n    };\n    return MarkdownDocumentFormatter;\n}());\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.activateMarkdownMath = void 0;\nvar contribution_1 = __webpack_require__(16);\nvar markdown_1 = __webpack_require__(17);\nfunction activateMarkdownMath() {\n    contribution_1.registerLanguage({\n        id: 'markdown-math',\n        extensions: ['.md', '.markdown', '.mdown', '.mkdn', '.mkd', '.mdwn', '.mdtxt', '.mdtext'],\n        aliases: ['Markdown', 'markdown'],\n        loader: function () {\n            return Promise.resolve({\n                conf: markdown_1.conf,\n                language: markdown_1.language\n            });\n        }\n    });\n}\nexports.activateMarkdownMath = activateMarkdownMath;\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.registerLanguage = exports.loadLanguage = void 0;\nvar monaco_editor_1 = __webpack_require__(0);\nvar languageDefinitions = {};\nfunction _loadLanguage(languageId) {\n    var loader = languageDefinitions[languageId].loader;\n    return loader().then(function (mod) {\n        monaco_editor_1.languages.setMonarchTokensProvider(languageId, mod.language);\n        monaco_editor_1.languages.setLanguageConfiguration(languageId, mod.conf);\n    });\n}\nvar languagePromises = {};\nfunction loadLanguage(languageId) {\n    if (!languagePromises[languageId]) {\n        languagePromises[languageId] = _loadLanguage(languageId);\n    }\n    return languagePromises[languageId];\n}\nexports.loadLanguage = loadLanguage;\nfunction registerLanguage(def) {\n    var languageId = def.id;\n    languageDefinitions[languageId] = def;\n    monaco_editor_1.languages.register(def);\n    monaco_editor_1.languages.onLanguage(languageId, function () {\n        loadLanguage(languageId);\n    });\n}\nexports.registerLanguage = registerLanguage;\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.language = exports.conf = void 0;\nvar latex_1 = __webpack_require__(7);\nexports.conf = {\n    comments: {\n        blockComment: ['<!--', '-->',]\n    },\n    brackets: [\n        ['{', '}'],\n        ['[', ']'],\n        ['(', ')']\n    ],\n    autoClosingPairs: [\n        { open: '{', close: '}' },\n        { open: '[', close: ']' },\n        { open: '(', close: ')' },\n        { open: '<', close: '>', notIn: ['string'] }\n    ],\n    surroundingPairs: [\n        { open: '(', close: ')' },\n        { open: '[', close: ']' },\n        { open: '`', close: '`' },\n    ],\n    folding: {\n        markers: {\n            start: new RegExp(\"^\\\\s*<!--\\\\s*#?region\\\\b.*-->\"),\n            end: new RegExp(\"^\\\\s*<!--\\\\s*#?endregion\\\\b.*-->\")\n        }\n    }\n};\nexports.language = {\n    defaultToken: '',\n    tokenPostfix: '.md',\n    // escape codes\n    control: /[\\\\`*_\\[\\]{}()#+\\-\\.!]/,\n    noncontrol: /[^\\\\`*_\\[\\]{}()#+\\-\\.!]/,\n    escapes: /\\\\(?:@control)/,\n    // escape codes for javascript/CSS strings\n    jsescapes: /\\\\(?:[btnfr\\\\\"']|[0-7][0-7]?|[0-3][0-7]{2})/,\n    // non matched elements\n    empty: [\n        'area', 'base', 'basefont', 'br', 'col', 'frame',\n        'hr', 'img', 'input', 'isindex', 'link', 'meta', 'param'\n    ],\n    latexKeywords: latex_1.all,\n    latexBeginKeywords: latex_1.begin_args,\n    tokenizer: {\n        root: [\n            // headers (with #)\n            [/^(\\s{0,3})(#+)((?:[^\\\\#]|@escapes)+)((?:#+)?)/, ['white', 'keyword', 'keyword', 'keyword']],\n            // headers (with =)\n            [/^\\s*(=+|\\-+)\\s*$/, 'keyword'],\n            // headers (with ***)\n            [/^\\s*((\\*[ ]?)+)\\s*$/, 'meta.separator'],\n            // quote\n            [/^\\s*>+/, 'comment'],\n            // list (starting with * or number)\n            [/^\\s*([\\*\\-+:]|\\d+\\.)\\s/, 'keyword'],\n            // code block (4 spaces indent)\n            [/^(\\t|[ ]{4})[^ ].*$/, 'string'],\n            // code block (3 tilde)\n            [/^\\s*~~~\\s*((?:\\w|[\\/\\-#])+)?\\s*$/, { token: 'string', next: '@codeblock' }],\n            // github style code blocks (with backticks and language)\n            [/^\\s*```\\s*((?:\\w|[\\/\\-#])+).*$/, { token: 'string', next: '@codeblockgh', nextEmbedded: '$1' }],\n            // github style code blocks (with backticks but no language)\n            [/^\\s*```\\s*$/, { token: 'string', next: '@codeblock' }],\n            //math\n            [/(^\\${2})/, { token: 'comment.math', next: 'math', bracket: '@open' }],\n            // markup within lines\n            { include: '@linecontent' },\n        ],\n        codeblock: [\n            [/^\\s*~~~\\s*$/, { token: 'string', next: '@pop' }],\n            [/^\\s*```\\s*$/, { token: 'string', next: '@pop' }],\n            [/.*$/, 'variable.source'],\n        ],\n        // github style code blocks\n        codeblockgh: [\n            [/```\\s*$/, { token: 'variable.source', next: '@pop', nextEmbedded: '@pop' }],\n            [/[^`]+/, 'variable.source'],\n        ],\n        linecontent: [\n            // escapes\n            [/&\\w+;/, 'string.escape'],\n            [/@escapes/, 'escape'],\n            // various markup\n            [/\\b__([^\\\\_]|@escapes|_(?!_))+__\\b/, 'strong'],\n            [/\\*\\*([^\\\\*]|@escapes|\\*(?!\\*))+\\*\\*/, 'strong'],\n            [/\\b_[^_]+_\\b/, 'emphasis'],\n            [/\\*([^\\\\*]|@escapes)+\\*/, 'emphasis'],\n            [/`([^\\\\`]|@escapes)+`/, 'variable'],\n            // links\n            [/\\{+[^}]+\\}+/, 'string.target'],\n            [/(!?\\[)((?:[^\\]\\\\]|@escapes)*)(\\]\\([^\\)]+\\))/, ['string.link', '', 'string.link']],\n            [/(!?\\[)((?:[^\\]\\\\]|@escapes)*)(\\])/, 'string.link'],\n            //inline math\n            [/(\\$\\$)([^$]*)(\\$\\$)/, [{ token: 'comment.math', bracket: '@open' },\n                    { token: '@rematch', next: 'mathInline', goBack: 2 },\n                    { token: 'comment.math', bracket: '@close' }]],\n            [/(\\$)([^$]+)(\\$)/, [{ token: 'comment.math', bracket: '@open' },\n                    { token: '@rematch', next: 'mathInline', goBack: 1 },\n                    { token: 'comment.math', bracket: '@close' }]],\n            // or html\n            { include: 'html' },\n        ],\n        // Note: it is tempting to rather switch to the real HTML mode instead of building our own here\n        // but currently there is a limitation in Monarch that prevents us from doing it: The opening\n        // '<' would start the HTML mode, however there is no way to jump 1 character back to let the\n        // HTML mode also tokenize the opening angle bracket. Thus, even though we could jump to HTML,\n        // we cannot correctly tokenize it in that mode yet.\n        html: [\n            // html tags\n            [/<(\\w+)\\/>/, 'tag'],\n            [/<(\\w+)/, {\n                    cases: {\n                        '@empty': { token: 'tag', next: '@tag.$1' },\n                        '@default': { token: 'tag', next: '@tag.$1' }\n                    }\n                }],\n            [/<\\/(\\w+)\\s*>/, { token: 'tag' }],\n            [/<!--/, 'comment', '@comment']\n        ],\n        comment: [\n            [/[^<\\-]+/, 'comment.content'],\n            [/-->/, 'comment', '@pop'],\n            [/<!--/, 'comment.content.invalid'],\n            [/[<\\-]/, 'comment.content']\n        ],\n        // Almost full HTML tag matching, complete with embedded scripts & styles\n        tag: [\n            [/[ \\t\\r\\n]+/, 'white'],\n            [/(type)(\\s*=\\s*)(\")([^\"]+)(\")/, ['attribute.name.html', 'delimiter.html', 'string.html',\n                    { token: 'string.html', switchTo: '@tag.$S2.$4' },\n                    'string.html']],\n            [/(type)(\\s*=\\s*)(')([^']+)(')/, ['attribute.name.html', 'delimiter.html', 'string.html',\n                    { token: 'string.html', switchTo: '@tag.$S2.$4' },\n                    'string.html']],\n            [/(\\w+)(\\s*=\\s*)(\"[^\"]*\"|'[^']*')/, ['attribute.name.html', 'delimiter.html', 'string.html']],\n            [/\\w+/, 'attribute.name.html'],\n            [/\\/>/, 'tag', '@pop'],\n            [/>/, {\n                    cases: {\n                        '$S2==style': { token: 'tag', switchTo: 'embeddedStyle', nextEmbedded: 'text/css' },\n                        '$S2==script': {\n                            cases: {\n                                '$S3': { token: 'tag', switchTo: 'embeddedScript', nextEmbedded: '$S3' },\n                                '@default': { token: 'tag', switchTo: 'embeddedScript', nextEmbedded: 'text/javascript' }\n                            }\n                        },\n                        '@default': { token: 'tag', next: '@pop' }\n                    }\n                }],\n        ],\n        embeddedStyle: [\n            [/[^<]+/, ''],\n            [/<\\/style\\s*>/, { token: '@rematch', next: '@pop', nextEmbedded: '@pop' }],\n            [/</, '']\n        ],\n        embeddedScript: [\n            [/[^<]+/, ''],\n            [/<\\/script\\s*>/, { token: '@rematch', next: '@pop', nextEmbedded: '@pop' }],\n            [/</, '']\n        ],\n        math: [\n            [/(\\${2})/, { token: 'comment.math', next: '@pop', bracket: '@close' }],\n            { include: 'latex' },\n        ],\n        mathInline: [\n            [/\\${1,2}/, { token: 'comment.math', next: '@pop', bracket: '@close' }],\n            { include: 'latex' },\n        ],\n        latex: [\n            [/(\\\\begin)({)/, ['keyword', { token: '', next: 'latexBeginArg' }]],\n            [/(\\\\end)({)/, ['keyword', { token: '', next: 'latexBeginArg' }]],\n            [/\\\\\\w+/, { cases: { '@latexKeywords': 'keyword', '@default': '' } }],\n        ],\n        latexBeginArg: [\n            [/\\w+/, { cases: { '@latexBeginKeywords': 'keyword', '@default': '' } }],\n            [/}/, { token: '', next: '@pop', bracket: '@close' }]\n        ]\n    }\n};\n\n\n/***/ })\n/******/ ]);\n});"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","modules","__webpack_require__","extendStatics","__extends","this","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","SnippetString","TextEditorSelectionChangeKind","TextEditorRevealType","WorkspaceEdit","TextEdit","EndOfLine","Selection","Range","Position","values","errors_1","forEachable","result","forEach","push","Min","positions","_i","arguments","length","TypeError","i","isBefore","Max","isAfter","isPosition","other","line","character","get","_line","enumerable","configurable","_character","isBeforeOrEqual","isAfterOrEqual","isEqual","compareTo","translate","lineDeltaOrChange","characterDelta","illegalArgument","lineDelta","with","lineOrChange","toJSON","isRange","thing","start","end","_start","_end","contains","positionOrRange","intersection","union","startOrChange","startLineOrStart","startColumnOrEnd","endLine","endColumn","Error","_super","isSelection","anchor","active","isReversed","_anchor","_active","anchorLineOrAnchor","anchorColumnOrActive","activeLine","activeColumn","_this","call","isTextEdit","newText","replace","range","insert","position","delete","setEndOfLine","eol","ret","newEol","_range","set","_newText","_newEol","renameFile","from","to","options","_edits","_type","createFile","uri","undefined","deleteFile","edit","resource","has","_a","toString","edits","edits_1","element","res","candidate","entries","textEdits","Map","textEdit","_allEntries","isSnippetString","_escape","appendText","string","appendTabstop","number","_tabstop","appendPlaceholder","nested","appendVariable","name","defaultValue","TextEditorEdit","TextEditor","TextDocument","getWordDefinitionFor","setWordDefinitionFor","extHostTypes_1","monaco_editor_1","vscode_utils_1","wordHelper_1","TypeConverters","_modeId2WordDefinition","modeId","wordDefinition","model","getEOL","LF","CRLF","getLineCount","getLinesContent","getText","getValueInRange","getValue","lineAt","lineOrPosition","_lines","text","firstNonWhitespaceCharacterIndex","_textLines","lineNumber","exec","rangeIncludingLineBreak","freeze","isEmptyOrWhitespace","offsetAt","getOffsetAt","positionAt","offset","getPositionAt","save","validateRange","validatePosition","maxCharacter","hasChanged","getWordRangeAtPosition","_position","regexp","regExpLeadsToEndlessLoop","console","warn","source","languageId","wordAtText","getWordAtText","ensureValidWordDefinition","startColumn","getLanguageId","editor","getModel","getSelection","setSelection","getSelections","map","s","setSelections","getVisibleRanges","r","callback","undoStopBefore","undoStopAfter","_disposed","Promise","reject","document","_applyEdit","editBuilder","editData","finalize","resolve","editRanges","sort","a","count","rangeEnd","forceMoveMarkers","pushEditOperations","revealRange","revealType","_editor","Default","ScrollType","Smooth","InCenter","revealRangeInCenter","InCenterIfOutsideViewport","revealRangeInCenterIfOutsideViewport","AtTop","revealRangeAtTop","revealRangeInEditor","applyEdit","newSelections","addAction","param","executeCommand","commandId","rest","trigger","action","getAction","isSupported","run","getConfiguration","configurationId","UndefinedConfiguration","_","_finalized","documentVersionId","_documentVersionId","_collectedEdits","_setEndOfLine","_undoStopBefore","_undoStopAfter","_throwIfFinalized","location","_pushEdit","validRange","_document","endOfLine","version","vscode","selection","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","startLineNumber","endLineNumber","column","EndOfLineSequence","entry","uriOrEdits","isArray","_b","uriOrEdits_1","e","__spreadArrays","il","k","j","jl","isSingleLink","activateFormatting","addKeybinding","listEditing_1","fun","keybindings","label","context","contextMenuGroupId","contextMenuOrder","id","keybindingContext","precondition","toggleBold","KeyMod","CtrlCmd","KeyCode","KeyB","toggleItalic","KeyI","toggleCodeSpan","Backquote","toggleStrikethrough","Alt","KeyS","toggleMath","KeyM","toggleMathReverse","Shift","toggleHeadingUp","WinCtrl","BracketLeft","toggleHeadingDown","BracketRight","toggleList","KeyL","ul","singleLinkRegex","RegExp","styleByWrapping","MathBlockState","maxHeading","lineIndex","lineText","deleteIndex","startsWith","transTable","NONE","INLINE","MULTI_DISPLAYED","SINGLE_DISPLAYED","reverseTransTable","bind","apply","reverse","_toggleMath","cursor","currentStateIndex","oldMathBlockState","newMathBlockState","isEmpty","getContext","lineCount","indexOf","rangeToBeDeleted","then","stringToBeInserted","newCursor","newPosition","doc","batchEdit","selections","toggleListSingleLine","fixMarker","wsEdit","indentation","trim","lineTextContent","substr","test","startPattern","endPattern","shifts","slice","newCursorPos","wordRange","currentTextLine","cursorPos","shift","pos","reduce","wrapRange","match","hasSelection","isSelected","startPtn","endPtn","prevSelection","ptnLength","newSelection","endsWith","isWrapped","startPositionCharacter","endPositionCharacter","leftText","deactivate","activateListEditing","util_1","formatting_1","onShiftTabKey","onTabKey","onShiftEnterKey","onEnterKey","onCtrlEnterKey","modifiers","matches","textBeforeCursor","textAfterCursor","lineBreakPos","isInFencedCodeBlock","asNormal","findNextMarkerLineNumber","config","marker","leadingSpace","previousMarker","delimiter","trailingSpace","gfmCheckbox","textIndent","toBeAdded_1","String","Number","repeat","Math","max","outdent","indentationSize","tryDetermineIndentationSize","error","onBackspaceKey","key","maxOutdentSize","min","currentIndentation","currentLineText","leadingSpace_1","marker_1","delimiter_1","fixedMarker","includes","lookUpwardForMarker","listIndent_1","fixedMarkerString_1","nextLine","indentString","nextLineText","editorContext","Enter","Tab","Backspace","slugify","extractText","g1","lineNum","PUNCTUATION_REGEXP","heading","toLowerCase","all","begin_args","_begin","_c3","_c2","_c1","Set","MonacoMarkdownExtension","vscode_monaco_1","completion_1","tableFormatter_1","markdown_contribution_1","activate","textEditor","activateCompletion","activateTableFormatter","activateMarkdownMath","getErrorMessage","disposed","readonly","illegalState","canceled","isPromiseCanceledError","transformErrorForSerialization","onUnexpectedExternalError","onUnexpectedError","setUnexpectedErrorHandler","errorHandler","ErrorHandler","addListener","listener","listeners","_removeListener","emit","splice","newUnexpectedErrorHandler","unexpectedErrorHandler","getUnexpectedErrorHandler","setTimeout","stack","message","$isError","stacktrace","canceledName","what","err","split","lastIndex","DEFAULT_WORD_REGEXP","USUAL_WORD_SEPARATORS","allowInWords","USUAL_WORD_SEPARATORS_1","sep","createWordRegExp","flags","global","ignoreCase","multiline","unicode","textOffset","matchIndex","index","word","lastIndexOf","toc_1","latex","completionActivated","completionList","items","suggestions","v","assign","newCompletionItem","kind","additionalTextEdits","command","commitCharacters","detail","documentation","filterText","insertTextRules","preselect","sortText","insertText","provider","MdCompletionItemProvider","languages","registerCompletionItemProvider","provideCompletionItems","_context","_token","lineTextBefore","substring","lineTextAfter","mathCompletions","textBefore","textAfter","startIndex","range_1","lines","usageCounts","useCounts","currentLine","pattern","usedRef","prev","curr","ref","item","CompletionItemKind","Reference","usages","endPosition","addClosingParen_1","toReplace","charAt","range_2","buildToc","triggerCharacters","c1","cmd","Function","c2","CompletionItemInsertTextRule","InsertAsSnippet","c3","envSnippet","Snippet","c","arr","filter","level","registerDocumentFormattingEditProvider","MarkdownDocumentFormatter","provideDocumentFormattingEdits","tables","detectTables","table","getRange","formatTable","lineBreak","contentLine","tableRegex","documentText","getTableIndentation","indentRegex","spacesInFirstLine","tabStops","round","tabSize","rows","rowsNoIndentPattern","colWidth","colAlign","fieldRegExp","cjkRegex","row","num","field","cell","length_1","cells","cellLength","alignText","join","align","floor","contribution_1","markdown_1","registerLanguage","extensions","aliases","loader","conf","language","loadLanguage","languageDefinitions","languagePromises","mod","setMonarchTokensProvider","setLanguageConfiguration","def","register","onLanguage","latex_1","comments","blockComment","brackets","autoClosingPairs","open","close","notIn","surroundingPairs","folding","markers","defaultToken","tokenPostfix","control","noncontrol","escapes","jsescapes","empty","latexKeywords","latexBeginKeywords","tokenizer","token","next","nextEmbedded","bracket","include","codeblock","codeblockgh","linecontent","goBack","html","cases","@empty","@default","comment","tag","switchTo","$S2==style","$S2==script","$S3","embeddedStyle","embeddedScript","math","mathInline","@latexKeywords","latexBeginArg","@latexBeginKeywords","installedModules","m","getter","o","Symbol","toStringTag","t","mode","__esModule","ns","n","object","property","moduleId","l"],"mappings":"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"}